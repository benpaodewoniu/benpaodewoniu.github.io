<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>犀牛的博客</title>
  
  <subtitle>姑苏城外一茅屋，万树梅花月满天</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://benpaodewoniu.github.io/"/>
  <updated>2024-03-24T06:36:22.112Z</updated>
  <id>http://benpaodewoniu.github.io/</id>
  
  <author>
    <name>犀牛</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>postman | 将chrome的url直接复制到postman</title>
    <link href="http://benpaodewoniu.github.io/2024/03/24/postman0/"/>
    <id>http://benpaodewoniu.github.io/2024/03/24/postman0/</id>
    <published>2024-03-24T06:20:54.000Z</published>
    <updated>2024-03-24T06:36:22.112Z</updated>
    
    <content type="html"><![CDATA[<p><code>chrome</code> 中直接复制，<code>copy</code> -&gt; <code>copy as cURL</code></p><a id="more"></a><p>然后在 <code>postman</code> 中 <code>import</code> 就好了。</p><p><img src="/images/postman/0_0.png" alt=""></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;code&gt;chrome&lt;/code&gt; 中直接复制，&lt;code&gt;copy&lt;/code&gt; -&amp;gt; &lt;code&gt;copy as cURL&lt;/code&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="应用" scheme="http://benpaodewoniu.github.io/categories/%E5%BA%94%E7%94%A8/"/>
    
      <category term="电脑软件" scheme="http://benpaodewoniu.github.io/categories/%E5%BA%94%E7%94%A8/%E7%94%B5%E8%84%91%E8%BD%AF%E4%BB%B6/"/>
    
      <category term="postman" scheme="http://benpaodewoniu.github.io/categories/%E5%BA%94%E7%94%A8/%E7%94%B5%E8%84%91%E8%BD%AF%E4%BB%B6/postman/"/>
    
    
      <category term="postman" scheme="http://benpaodewoniu.github.io/tags/postman/"/>
    
      <category term="software" scheme="http://benpaodewoniu.github.io/tags/software/"/>
    
  </entry>
  
  <entry>
    <title>python | 解决 cors</title>
    <link href="http://benpaodewoniu.github.io/2024/03/24/python204/"/>
    <id>http://benpaodewoniu.github.io/2024/03/24/python204/</id>
    <published>2024-03-24T03:57:32.000Z</published>
    <updated>2024-03-24T04:22:15.257Z</updated>
    
    <content type="html"><![CDATA[<p>只需要添加几行代码就好了。</p><p>但是，我这是全局 <code>cors</code>，<code>flask</code> 可以精确到某一个 <code>api</code> 的 <code>cors</code>，感兴趣的可以自己搜一下。</p><a id="more"></a><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line">app = <span class="constructor">Flask(<span class="params">__name__</span>)</span></span><br><span class="line"><span class="constructor">CORS(<span class="params">app</span>, <span class="params">supports_credentials</span>=True)</span></span><br><span class="line">...</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;只需要添加几行代码就好了。&lt;/p&gt;
&lt;p&gt;但是，我这是全局 &lt;code&gt;cors&lt;/code&gt;，&lt;code&gt;flask&lt;/code&gt; 可以精确到某一个 &lt;code&gt;api&lt;/code&gt; 的 &lt;code&gt;cors&lt;/code&gt;，感兴趣的可以自己搜一下。&lt;/p&gt;
    
    </summary>
    
      <category term="python" scheme="http://benpaodewoniu.github.io/categories/python/"/>
    
      <category term="框架" scheme="http://benpaodewoniu.github.io/categories/python/%E6%A1%86%E6%9E%B6/"/>
    
      <category term="flask" scheme="http://benpaodewoniu.github.io/categories/python/%E6%A1%86%E6%9E%B6/flask/"/>
    
    
      <category term="flask" scheme="http://benpaodewoniu.github.io/tags/flask/"/>
    
  </entry>
  
  <entry>
    <title>python | 使用 gunicorn 运行 flask</title>
    <link href="http://benpaodewoniu.github.io/2024/03/24/python203/"/>
    <id>http://benpaodewoniu.github.io/2024/03/24/python203/</id>
    <published>2024-03-24T03:41:02.000Z</published>
    <updated>2024-03-24T04:20:00.809Z</updated>
    
    <content type="html"><![CDATA[<p>这里的环境是</p><ul><li><a href="/2021/08/17/python144/">python ｜ 在 linux 上安装 python</a></li></ul><a id="more"></a><p>安装</p><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo pip <span class="keyword">install</span> gunicorn</span><br></pre></td></tr></table></figure><p>把上面的 python 安装完之后，除了建立 python3.7 的软链接外，还要建立 python 和 python3 的，即加上</p><figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo ln -s <span class="meta-keyword">/usr/</span>local<span class="meta-keyword">/src/</span>python37<span class="meta-keyword">/bin/</span>python3<span class="number">.7</span> <span class="meta-keyword">/usr/</span>bin/python3</span><br><span class="line">sudo ln -s <span class="meta-keyword">/usr/</span>local<span class="meta-keyword">/src/</span>python37<span class="meta-keyword">/bin/</span>python3<span class="number">.7</span> <span class="meta-keyword">/usr/</span>bin/python</span><br></pre></td></tr></table></figure><p>然后运行 python 看是否正常。</p><p>然后执行(我的入口文件叫做 <code>api.py</code>)</p><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gunicorn -w <span class="number">4</span> -b <span class="number">0.0</span><span class="number">.0</span><span class="number">.0</span>:<span class="number">8081</span> api:app &amp;</span><br></pre></td></tr></table></figure><p>这个时候会报错</p><figure class="highlight clean"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">File <span class="string">"/usr/lib/command-not-found"</span>, line <span class="number">27</span>, <span class="keyword">in</span> &lt;<span class="keyword">module</span>&gt;</span><br><span class="line">    <span class="keyword">from</span> CommandNotFound.util <span class="keyword">import</span> crash_guard</span><br><span class="line">ModuleNotFoundError: No <span class="keyword">module</span> named <span class="string">'CommandNotFound'</span></span><br></pre></td></tr></table></figure><p>这是环境变量有关</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">sudo vim /etc/profile</span><br><span class="line">在文件后面添加</span><br><span class="line"><span class="builtin-name">export</span> <span class="attribute">PATH</span>=<span class="variable">$PATH</span>:/usr/local/src/python37/bin</span><br><span class="line">然后让配置生效</span><br><span class="line">source /etc/profile</span><br></pre></td></tr></table></figure><p>此时再次执行</p><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gunicorn -w <span class="number">4</span> -b <span class="number">0.0</span><span class="number">.0</span><span class="number">.0</span>:<span class="number">8081</span> api:app &amp;</span><br></pre></td></tr></table></figure><p>就可以了。</p><p>但是，我觉得即便是什么都不配置，直接执行也可以，比如</p><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="regexp">/usr/</span>local<span class="regexp">/src/</span>python37<span class="regexp">/bin/</span>python3<span class="number">.7</span> <span class="regexp">/usr/</span>local<span class="regexp">/src/</span>python37<span class="regexp">/bin/</span>gunicorn -w <span class="number">4</span> -b <span class="number">0.0</span><span class="number">.0</span><span class="number">.0</span>:<span class="number">8081</span> <span class="string">api:</span>app &amp;</span><br></pre></td></tr></table></figure><p>不过，我没直接用过，有想用的可以尝试一下。</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;这里的环境是&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;/2021/08/17/python144/&quot;&gt;python ｜ 在 linux 上安装 python&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
    
    </summary>
    
      <category term="python" scheme="http://benpaodewoniu.github.io/categories/python/"/>
    
      <category term="框架" scheme="http://benpaodewoniu.github.io/categories/python/%E6%A1%86%E6%9E%B6/"/>
    
      <category term="模块" scheme="http://benpaodewoniu.github.io/categories/python/%E6%A8%A1%E5%9D%97/"/>
    
      <category term="flask" scheme="http://benpaodewoniu.github.io/categories/python/%E6%A1%86%E6%9E%B6/flask/"/>
    
      <category term="gunicorn" scheme="http://benpaodewoniu.github.io/categories/python/%E6%A8%A1%E5%9D%97/gunicorn/"/>
    
    
      <category term="flask" scheme="http://benpaodewoniu.github.io/tags/flask/"/>
    
  </entry>
  
  <entry>
    <title>thlm | 主站的搭建</title>
    <link href="http://benpaodewoniu.github.io/2024/03/24/thlm1/"/>
    <id>http://benpaodewoniu.github.io/2024/03/24/thlm1/</id>
    <published>2024-03-24T03:40:24.000Z</published>
    <updated>2024-03-24T03:53:06.448Z</updated>
    
    <content type="html"><![CDATA[<p>主站需要的主要是</p><ul><li><code>nginx</code></li><li><code>wordpress</code></li><li><code>php7.4</code></li><li><code>mysql8</code></li></ul><a id="more"></a><h2 id="wordpress"><a href="#wordpress" class="headerlink" title="wordpress"></a>wordpress</h2><p>主要参考</p><ul><li><a href="/categories/网站设计/WordPress/">wordpress</a></li></ul><p>我将 <code>https</code> 的相关证书放在了 <code>~/https</code></p><ul><li><a href="/2024/03/08/wordpress10/">wordpress | 将 wordpress 的 http 变成 https</a></li></ul><h2 id="mysql"><a href="#mysql" class="headerlink" title="mysql"></a>mysql</h2><ul><li><a href="/2024/02/28/wordpress3/">nginx</a></li></ul><h2 id="php7-4"><a href="#php7-4" class="headerlink" title="php7.4"></a>php7.4</h2><ul><li><a href="/2024/02/28/wordpress3/">nginx</a></li></ul><h2 id="nginx"><a href="#nginx" class="headerlink" title="nginx"></a>nginx</h2><ul><li><a href="/2024/02/28/wordpress3/">nginx</a></li></ul><p>我在 <code>site-available</code> 创建了 <code>wordpress.conf</code>，另外将 <code>default</code> 给删除了，关于配置请参考</p><ul><li><a href="/2024/03/22/nginx6/">nginx | 安装等基础解答</a></li></ul><p><code>wordpress.conf</code> 的内容是</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">upstream</span> php &#123;</span><br><span class="line">        <span class="attribute">server</span> unix:/run/php/php7.4-fpm.sock;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="section">server</span> &#123;</span><br><span class="line">        <span class="attribute">listen</span> <span class="number">80</span>;</span><br><span class="line">       <span class="attribute">server_name</span> _;</span><br><span class="line">       <span class="attribute">listen</span> <span class="number">443</span> ssl default_server;</span><br><span class="line">       <span class="attribute">listen</span> [::]:<span class="number">443</span> ssl default_server;<span class="comment">#新增这两个</span></span><br><span class="line">       <span class="attribute">ssl_certificate</span> /home/ubuntu/https/fullchain.crt;</span><br><span class="line">       <span class="attribute">ssl_certificate_key</span> /home/ubuntu/https/private.pem;</span><br><span class="line">       </span><br><span class="line">        <span class="attribute">root</span> /var/www/wordpress; <span class="comment"># wordpress 的放置路径</span></span><br><span class="line">        <span class="attribute">index</span> index.php;</span><br><span class="line"></span><br><span class="line">        <span class="attribute">location</span> = /favicon.ico &#123;</span><br><span class="line">                <span class="attribute">log_not_found</span> <span class="literal">off</span>;</span><br><span class="line">                <span class="attribute">access_log</span> <span class="literal">off</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="attribute">location</span> = /robots.txt &#123;</span><br><span class="line">                <span class="attribute">allow</span> all;</span><br><span class="line">                <span class="attribute">log_not_found</span> <span class="literal">off</span>;</span><br><span class="line">                <span class="attribute">access_log</span> <span class="literal">off</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="attribute">location</span> /lumi/Extend &#123;</span><br><span class="line">           <span class="attribute">alias</span> /var/www/wordpress/Extend/;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="attribute">location</span> / &#123;</span><br><span class="line">                <span class="attribute">try_files</span> <span class="variable">$uri</span> <span class="variable">$uri</span>/ /index.php?<span class="variable">$args</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="attribute">location</span> <span class="regexp">~ \.php$</span> &#123;</span><br><span class="line">                <span class="attribute">include</span> fastcgi_params;</span><br><span class="line">                <span class="attribute">fastcgi_intercept_errors</span> <span class="literal">on</span>;</span><br><span class="line">                <span class="attribute">fastcgi_pass</span> php;</span><br><span class="line">                <span class="attribute">fastcgi_param</span>  SCRIPT_FILENAME <span class="variable">$document_root</span><span class="variable">$fastcgi_script_name</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="attribute">location</span> <span class="regexp">~* \.(js|css|png|jpg|jpeg|gif|ico)$</span> &#123;</span><br><span class="line">                <span class="attribute">expires</span> max;</span><br><span class="line">                <span class="attribute">log_not_found</span> <span class="literal">on</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="attribute">rewrite</span><span class="regexp"> ^/([_0-9a-zA-Z-]+/)?wp-admin$</span> /<span class="variable">$1</span>wp-admin/ <span class="literal">permanent</span>;</span><br><span class="line"> </span><br><span class="line">        <span class="attribute">if</span> (-f <span class="variable">$request_filename</span>)&#123;</span><br><span class="line">            <span class="attribute">set</span> <span class="variable">$rule_2</span> <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="attribute">if</span> (-d <span class="variable">$request_filename</span>)&#123;</span><br><span class="line">            <span class="attribute">set</span> <span class="variable">$rule_2</span> <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="attribute">if</span> (<span class="variable">$rule_2</span> = <span class="string">"1"</span>)&#123;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="attribute">rewrite</span><span class="regexp"> ^/([_0-9a-zA-Z-]+/)?(wp-(content|admin|includes).*)</span> /<span class="variable">$2</span> <span class="literal">last</span>;</span><br><span class="line">        <span class="attribute">rewrite</span><span class="regexp"> ^/([_0-9a-zA-Z-]+/)?(.*.php)$</span> /<span class="variable">$2</span> <span class="literal">last</span>;</span><br><span class="line">       <span class="attribute">rewrite</span><span class="regexp"> ^/(?!lumi/Extend|Static)(.*)$</span> /index.php?<span class="variable">$1</span> <span class="literal">last</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;主站需要的主要是&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;nginx&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;wordpress&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;php7.4&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;mysql8&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
    
    </summary>
    
      <category term="项目经历" scheme="http://benpaodewoniu.github.io/categories/%E9%A1%B9%E7%9B%AE%E7%BB%8F%E5%8E%86/"/>
    
      <category term="中型" scheme="http://benpaodewoniu.github.io/categories/%E9%A1%B9%E7%9B%AE%E7%BB%8F%E5%8E%86/%E4%B8%AD%E5%9E%8B/"/>
    
      <category term="thlm" scheme="http://benpaodewoniu.github.io/categories/%E9%A1%B9%E7%9B%AE%E7%BB%8F%E5%8E%86/%E4%B8%AD%E5%9E%8B/thlm/"/>
    
    
      <category term="thlm" scheme="http://benpaodewoniu.github.io/tags/thlm/"/>
    
  </entry>
  
  <entry>
    <title>thlm | 采集的搭建</title>
    <link href="http://benpaodewoniu.github.io/2024/03/24/thlm0/"/>
    <id>http://benpaodewoniu.github.io/2024/03/24/thlm0/</id>
    <published>2024-03-23T16:35:34.000Z</published>
    <updated>2024-03-24T04:23:55.287Z</updated>
    
    <content type="html"><![CDATA[<p>采集要准备的环境。</p><ul><li><code>python3.7</code></li><li><code>redis</code></li><li><code>chrome</code>「暂不需要」</li></ul><a id="more"></a><h2 id="python-相关"><a href="#python-相关" class="headerlink" title="python 相关"></a>python 相关</h2><ul><li><a href="/2021/08/17/python144/">python ｜ 在 linux 上安装 python</a></li></ul><h3 id="需要的环境"><a href="#需要的环境" class="headerlink" title="需要的环境"></a>需要的环境</h3><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">selenium==<span class="number">3.141</span><span class="number">.0</span></span><br><span class="line">urllib3==<span class="number">1.24</span><span class="number">.2</span></span><br><span class="line">pyyaml</span><br><span class="line">RhinoLogger</span><br><span class="line">dingtalkchatbot</span><br><span class="line">redis</span><br><span class="line">flask</span><br><span class="line">flask_cors</span><br><span class="line">gunicorn</span><br></pre></td></tr></table></figure><h3 id="运行采集"><a href="#运行采集" class="headerlink" title="运行采集"></a>运行采集</h3><p>采集目前没有什么要说的。</p><h3 id="运行-API"><a href="#运行-API" class="headerlink" title="运行 API"></a>运行 API</h3><p>由于 <code>API</code> 是通过 <code>flask</code> 写的，所以，我们用 <code>gunicorn</code> 来运行。</p><ul><li><a href="/2024/03/24/python203/">python | 使用 gunicorn 运行 flask</a></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;采集要准备的环境。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;python3.7&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;redis&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;chrome&lt;/code&gt;「暂不需要」&lt;/li&gt;
&lt;/ul&gt;
    
    </summary>
    
      <category term="项目经历" scheme="http://benpaodewoniu.github.io/categories/%E9%A1%B9%E7%9B%AE%E7%BB%8F%E5%8E%86/"/>
    
      <category term="中型" scheme="http://benpaodewoniu.github.io/categories/%E9%A1%B9%E7%9B%AE%E7%BB%8F%E5%8E%86/%E4%B8%AD%E5%9E%8B/"/>
    
      <category term="thlm" scheme="http://benpaodewoniu.github.io/categories/%E9%A1%B9%E7%9B%AE%E7%BB%8F%E5%8E%86/%E4%B8%AD%E5%9E%8B/thlm/"/>
    
    
      <category term="thlm" scheme="http://benpaodewoniu.github.io/tags/thlm/"/>
    
  </entry>
  
  <entry>
    <title>nginx | 多站点配置</title>
    <link href="http://benpaodewoniu.github.io/2024/03/22/nginx7/"/>
    <id>http://benpaodewoniu.github.io/2024/03/22/nginx7/</id>
    <published>2024-03-22T08:36:20.000Z</published>
    <updated>2024-03-22T09:31:46.362Z</updated>
    
    <content type="html"><![CDATA[<p>目的是</p><p>我有一个域名，比如 <code>xxx.com</code>，我要求</p><ul><li><code>xxx.com/</code> 访问主站项目</li><li><code>xxx.com/Static/aaa</code> 访问某一个目录下的其他项目</li></ul><a id="more"></a><p>这次用的是 <code>nginx</code> 的 <code>default</code> 配置，关于这个配置请查看</p><ul><li><a href="/2024/03/22/nginx6/">nginx | 安装等基础解答</a></li></ul><p>这里直接贴配置</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">server</span> &#123;</span><br><span class="line">        <span class="attribute">listen</span> <span class="number">80</span> default_server;</span><br><span class="line">        <span class="attribute">listen</span> [::]:<span class="number">80</span> default_server;</span><br><span class="line"></span><br><span class="line">        <span class="attribute">root</span> /var/www/html;</span><br><span class="line">        <span class="comment">#index index.html index.htm index.nginx-debian.html;</span></span><br><span class="line"></span><br><span class="line">        <span class="attribute">server_name</span> _;</span><br><span class="line"></span><br><span class="line">        <span class="attribute">absolute_redirect</span> <span class="literal">off</span>;</span><br><span class="line"></span><br><span class="line">        <span class="attribute">location</span> /Static/lumi &#123;</span><br><span class="line">                <span class="attribute">alias</span> /home/thlm/Static/lumi;</span><br><span class="line">                <span class="attribute">index</span> index.html;</span><br><span class="line">                <span class="attribute">try_files</span> <span class="variable">$uri</span> <span class="variable">$uri</span>/ /Static/lumi;</span><br><span class="line">                <span class="comment">#error_page 404  /Static/lumi;</span></span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>这里说一下相关的配置，我电脑 <code>nginx</code> 是 <code>1.18.0</code></p><h2 id="absolute-redirect"><a href="#absolute-redirect" class="headerlink" title="absolute_redirect"></a>absolute_redirect</h2><p>这个是表明，重定向是要带端口号。</p><p>如果，没有这句话，那么 404 重定向的时候会把端口去掉。</p><ul><li><a href="https://blog.csdn.net/qq_34208660/article/details/129047152">nginx设置重定向跳转后ip:[端口]/abc变成ip/abc而报错404</a></li></ul><p>根据资料中说</p><p>新版本nginx（≥1.11.8）</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">absolute_redirect</span> <span class="literal">off</span>;</span><br></pre></td></tr></table></figure><p>旧版本nginx（＜1.11.8）【未测试】</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">port_in_redirect</span> <span class="literal">off</span>;</span><br></pre></td></tr></table></figure><h2 id="Static-lumi"><a href="#Static-lumi" class="headerlink" title="/Static/lumi"></a>/Static/lumi</h2><p>上面是说，当访问 /Static/lumi 的时候这个 uri 的时候，走的是下面的配置。</p><p>其中，alias 将资源重定向到 /home/thlm/Static/lumi 文件夹下。</p><p>默认资源是在 <code>/var/www/html</code>。</p><p>index 表明告诉你，主页是什么？比如，这个配置，相当于主页是 /Static/lumi/index.html</p><p>剩下的</p><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">try_files $uri $uri/ /<span class="keyword">Static</span>/lumi<span class="comment">;</span></span><br><span class="line"><span class="meta">#error_page 404  /Static/lumi<span class="comment">;</span></span></span><br><span class="line"><span class="meta">#error_page 404 = 301  /Static/lumi<span class="comment">;</span></span></span><br></pre></td></tr></table></figure><p>都差不多，当有一个 <code>uri</code> 寻找不到资源的时候，就返回主页。</p><p>需要注意的是，下面的写法都是错误的</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">try_files <span class="variable">$uri</span> <span class="variable">$uri</span><span class="regexp">/ /</span>Static<span class="regexp">/lumi/i</span>ndex.html;</span><br><span class="line">try_files <span class="variable">$uri</span> <span class="variable">$uri</span><span class="regexp">/ index.html;</span></span><br></pre></td></tr></table></figure><p>第一种，<code>index.html</code> 并不存在，返回的页面是空，第二种其实是将资源指向了 <code>/var/www/html/index.html</code></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;目的是&lt;/p&gt;
&lt;p&gt;我有一个域名，比如 &lt;code&gt;xxx.com&lt;/code&gt;，我要求&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;xxx.com/&lt;/code&gt; 访问主站项目&lt;/li&gt;
&lt;li&gt;&lt;code&gt;xxx.com/Static/aaa&lt;/code&gt; 访问某一个目录下的其他项目&lt;/li&gt;
&lt;/ul&gt;
    
    </summary>
    
      <category term="网站设计" scheme="http://benpaodewoniu.github.io/categories/%E7%BD%91%E7%AB%99%E8%AE%BE%E8%AE%A1/"/>
    
      <category term="服务端" scheme="http://benpaodewoniu.github.io/categories/%E7%BD%91%E7%AB%99%E8%AE%BE%E8%AE%A1/%E6%9C%8D%E5%8A%A1%E7%AB%AF/"/>
    
      <category term="nginx" scheme="http://benpaodewoniu.github.io/categories/%E7%BD%91%E7%AB%99%E8%AE%BE%E8%AE%A1/%E6%9C%8D%E5%8A%A1%E7%AB%AF/nginx/"/>
    
    
      <category term="nginx" scheme="http://benpaodewoniu.github.io/tags/nginx/"/>
    
  </entry>
  
  <entry>
    <title>nginx | 安装等基础解答</title>
    <link href="http://benpaodewoniu.github.io/2024/03/22/nginx6/"/>
    <id>http://benpaodewoniu.github.io/2024/03/22/nginx6/</id>
    <published>2024-03-22T08:36:17.000Z</published>
    <updated>2024-03-22T09:06:32.117Z</updated>
    
    <content type="html"><![CDATA[<p>我的环境是</p><ul><li><code>ubuntu20.04</code></li></ul><a id="more"></a><h2 id="更新操作系统"><a href="#更新操作系统" class="headerlink" title="更新操作系统"></a>更新操作系统</h2><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-<span class="builtin-name">get</span> update</span><br><span class="line">sudo apt-<span class="builtin-name">get</span><span class="built_in"> upgrade </span>-y</span><br></pre></td></tr></table></figure><h2 id="安装-nginx"><a href="#安装-nginx" class="headerlink" title="安装 nginx"></a>安装 nginx</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get <span class="keyword">install</span> nginx -y <span class="comment"># 安装</span></span><br><span class="line">sudo systemctl <span class="keyword">status</span> nginx <span class="comment"># nginx 运行状态</span></span><br><span class="line">sudo systemctl <span class="keyword">start</span> nginx <span class="comment"># 启动</span></span><br><span class="line">sudo systemctl <span class="keyword">enable</span> nginx <span class="comment"># 开机自启动</span></span><br></pre></td></tr></table></figure><p>这安装的是 ubuntu20.04 默认的 nginx，我的版本是 1.18.0</p><h2 id="配置介绍"><a href="#配置介绍" class="headerlink" title="配置介绍"></a>配置介绍</h2><p>主配置在</p><ul><li><code>/etc/nginx/nginx.conf</code></li></ul><p>主配置里面有两句话</p><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">include</span> <span class="regexp">/etc/</span>nginx<span class="regexp">/conf.d/</span>*.conf;</span><br><span class="line"><span class="keyword">include</span> <span class="regexp">/etc/</span>nginx<span class="regexp">/sites-enabled/</span>*;</span><br></pre></td></tr></table></figure><p>说明配置也包含上述的路径。</p><p>其中，<code>/etc/nginx/sites-enabled/*;</code> 存储的其实是软链接。</p><p>里面包含一个 default 文件，它其实是 <code>/etc/nginx/sites-available/*;</code> 里面的软链接。</p><p>默认的 <code>nginx</code> 配置为</p><ul><li><code>/etc/nginx/nginx.conf</code></li><li><code>/etc/nginx/sites-available/default</code></li></ul><p>如果你想创立一个站点，比如，site，我是这样建议的</p><ul><li>删除 <code>/etc/nginx/sites-available/default</code></li><li>删除 <code>/etc/nginx/sites-enabled/default</code></li><li>在 <code>/etc/nginx/sites-available/</code> 添加 <code>site.conf</code></li><li>创造软链接<ul><li><code>sudo ln -s /etc/nginx/sites-available/site.conf /etc/nginx/sites-enabled/site.conf</code></li></ul></li><li>修改 <code>/etc/nginx/sites-available/site.conf</code></li></ul><p>一个经典案例来自于</p><ul><li><a href="/2024/02/28/wordpress3/">wordpress | wordpress 搭建(包含多站点)</a></li></ul><p><code>nginx</code> 的日志在</p><ul><li><code>/var/log/nginx</code></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;我的环境是&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;ubuntu20.04&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
    
    </summary>
    
      <category term="网站设计" scheme="http://benpaodewoniu.github.io/categories/%E7%BD%91%E7%AB%99%E8%AE%BE%E8%AE%A1/"/>
    
      <category term="服务端" scheme="http://benpaodewoniu.github.io/categories/%E7%BD%91%E7%AB%99%E8%AE%BE%E8%AE%A1/%E6%9C%8D%E5%8A%A1%E7%AB%AF/"/>
    
      <category term="nginx" scheme="http://benpaodewoniu.github.io/categories/%E7%BD%91%E7%AB%99%E8%AE%BE%E8%AE%A1/%E6%9C%8D%E5%8A%A1%E7%AB%AF/nginx/"/>
    
    
      <category term="nginx" scheme="http://benpaodewoniu.github.io/tags/nginx/"/>
    
  </entry>
  
  <entry>
    <title>ok | oklink 链上数据以及基本用法</title>
    <link href="http://benpaodewoniu.github.io/2024/03/21/ok0/"/>
    <id>http://benpaodewoniu.github.io/2024/03/21/ok0/</id>
    <published>2024-03-21T07:25:47.000Z</published>
    <updated>2024-03-24T04:45:57.129Z</updated>
    
    <content type="html"><![CDATA[<p><code>OK</code> 将链上数据进行了整理，非常牛逼。</p><a id="more"></a><ul><li><a href="https://www.oklink.com/docs/zh/#explorer-api-nft">oklink</a></li></ul><p>免费 <code>api</code> 有 <code>100万</code>额度，非常良心。</p><p>这里主要介绍 <code>3</code> 种 <code>api</code> 用法</p><ul><li>持币 <code>holders</code></li><li><code>nft</code> 地板价</li><li><code>nft</code> 具体细节获取</li></ul><h2 id="基础代码运行"><a href="#基础代码运行" class="headerlink" title="基础代码运行"></a>基础代码运行</h2><figure class="highlight nix"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">import</span> requests</span><br><span class="line"></span><br><span class="line"><span class="attr">url</span> = <span class="string">"https://www.oklink.com/api/v5/explorer/nft/nft-listing-list?chainShortName=ARBITRUM&amp;tokenContractAddress=0xcf8b334f02ad9c80dc6a2db8191983acbeebac83&amp;tokenId=1&amp;marketplace=OpenSea&amp;limit=100"</span></span><br><span class="line"></span><br><span class="line"><span class="attr">payload</span> = <span class="string">""</span></span><br><span class="line"><span class="attr">headers</span> = &#123;</span><br><span class="line">    <span class="comment"># apiKey</span></span><br><span class="line">    'Ok-Access-Key': '*****'</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="attr">response</span> = requests.request(<span class="string">"GET"</span>, url, <span class="attr">headers=headers,</span> <span class="attr">data=payload)</span></span><br><span class="line"></span><br><span class="line">print(response.text)</span><br></pre></td></tr></table></figure><h2 id="持币-holders"><a href="#持币-holders" class="headerlink" title="持币 holders"></a>持币 holders</h2><p><code>ok</code> 的持币 <code>page</code> 是从 <code>1</code> 开始的，不是从 <code>0</code> 开始的。</p><p>即</p><figure class="highlight sas"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">https://www.oklink.com/api/v5/explorer/token/position-<span class="meta">list</span>?chainShortName=eth<span class="variable">&amp;tokenContractAddress</span>=0xa8218CBDb4Accce36EE92874Fe34a999abC30A7a<span class="variable">&amp;limit</span>=100<span class="variable">&amp;page</span>=1</span><br><span class="line"></span><br><span class="line">https://www.oklink.com/api/v5/explorer/token/position-<span class="meta">list</span>?chainShortName=eth<span class="variable">&amp;tokenContractAddress</span>=0xa8218CBDb4Accce36EE92874Fe34a999abC30A7a<span class="variable">&amp;limit</span>=100<span class="variable">&amp;page</span>=0</span><br></pre></td></tr></table></figure><p>这两个是没区别的。</p><h2 id="nft-地板价"><a href="#nft-地板价" class="headerlink" title="nft 地板价"></a>nft 地板价</h2><p>以 lumi box nft 为例。</p><p><img src="/images/ok/0_0.png" alt=""></p><p>这里面有 <code>4</code> 种 <code>nft</code>，点进去就发现，<code>4</code> 个 <code>url</code> 分别是</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">https:<span class="regexp">//</span>opensea.io<span class="regexp">/assets/</span>arbitrum<span class="regexp">/0xcf8b334f02ad9c80dc6a2db8191983acbeebac83/</span><span class="number">1</span></span><br><span class="line">https:<span class="regexp">//</span>opensea.io<span class="regexp">/assets/</span>arbitrum<span class="regexp">/0xcf8b334f02ad9c80dc6a2db8191983acbeebac83/</span><span class="number">2</span></span><br><span class="line">https:<span class="regexp">//</span>opensea.io<span class="regexp">/assets/</span>arbitrum<span class="regexp">/0xcf8b334f02ad9c80dc6a2db8191983acbeebac83/</span><span class="number">3</span></span><br><span class="line">https:<span class="regexp">//</span>opensea.io<span class="regexp">/assets/</span>arbitrum<span class="regexp">/0xcf8b334f02ad9c80dc6a2db8191983acbeebac83/</span><span class="number">4</span></span><br></pre></td></tr></table></figure><p>如果，你使用 <code>/api/v5/explorer/nft/collection-floor-price</code>，只能得到 <code>1</code> 的地板价，<code>2，3，4</code>是得不到的。</p><p>如何得到 <code>1，2，3，4</code> 的出售单呢？</p><h2 id="nft-具体细节获取"><a href="#nft-具体细节获取" class="headerlink" title="nft 具体细节获取"></a>nft 具体细节获取</h2><p>要想获取 1，2，3，4分别的最低价，就需要借助</p><p><code>/api/v5/explorer/nft/nft-listing-list</code> 参数 <code>tokenId</code> 分别传入 <code>1，2，3，4</code> 即可。</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;code&gt;OK&lt;/code&gt; 将链上数据进行了整理，非常牛逼。&lt;/p&gt;
    
    </summary>
    
      <category term="项目经历" scheme="http://benpaodewoniu.github.io/categories/%E9%A1%B9%E7%9B%AE%E7%BB%8F%E5%8E%86/"/>
    
      <category term="大型" scheme="http://benpaodewoniu.github.io/categories/%E9%A1%B9%E7%9B%AE%E7%BB%8F%E5%8E%86/%E5%A4%A7%E5%9E%8B/"/>
    
      <category term="quantify" scheme="http://benpaodewoniu.github.io/categories/%E9%A1%B9%E7%9B%AE%E7%BB%8F%E5%8E%86/%E5%A4%A7%E5%9E%8B/quantify/"/>
    
      <category term="gateway" scheme="http://benpaodewoniu.github.io/categories/%E9%A1%B9%E7%9B%AE%E7%BB%8F%E5%8E%86/%E5%A4%A7%E5%9E%8B/quantify/gateway/"/>
    
      <category term="ok" scheme="http://benpaodewoniu.github.io/categories/%E9%A1%B9%E7%9B%AE%E7%BB%8F%E5%8E%86/%E5%A4%A7%E5%9E%8B/quantify/gateway/ok/"/>
    
      <category term="oklink" scheme="http://benpaodewoniu.github.io/categories/%E9%A1%B9%E7%9B%AE%E7%BB%8F%E5%8E%86/%E5%A4%A7%E5%9E%8B/quantify/gateway/ok/oklink/"/>
    
    
      <category term="oklink" scheme="http://benpaodewoniu.github.io/tags/oklink/"/>
    
  </entry>
  
  <entry>
    <title>python | mac 和 ubuntu 上的最佳实践</title>
    <link href="http://benpaodewoniu.github.io/2024/03/20/python202/"/>
    <id>http://benpaodewoniu.github.io/2024/03/20/python202/</id>
    <published>2024-03-19T16:34:32.000Z</published>
    <updated>2024-03-19T16:55:09.563Z</updated>
    
    <content type="html"><![CDATA[<p>这里的最佳实践是 <code>python</code> + <code>chrome-headless-shell</code>。</p><a id="more"></a><p>在看之前一定要先看</p><ul><li><a href="/2024/03/20/python201/">python | chrome-headless-shell</a></li></ul><p>整个环境是</p><ul><li>python 3.7</li><li>chromedriver + chrome-headless-shell<ul><li>最新版本</li></ul></li><li>selenium<ul><li>3.141.0</li></ul></li><li>urllib3<ul><li>1.24.2</li></ul></li></ul><p>记住，上面那两个安装库的版本是实践过的，其他的版本可能会报错。</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;这里的最佳实践是 &lt;code&gt;python&lt;/code&gt; + &lt;code&gt;chrome-headless-shell&lt;/code&gt;。&lt;/p&gt;
    
    </summary>
    
      <category term="python" scheme="http://benpaodewoniu.github.io/categories/python/"/>
    
      <category term="模块" scheme="http://benpaodewoniu.github.io/categories/python/%E6%A8%A1%E5%9D%97/"/>
    
      <category term="selenium" scheme="http://benpaodewoniu.github.io/categories/python/%E6%A8%A1%E5%9D%97/selenium/"/>
    
    
      <category term="python" scheme="http://benpaodewoniu.github.io/tags/python/"/>
    
  </entry>
  
  <entry>
    <title>python | chrome-headless-shell</title>
    <link href="http://benpaodewoniu.github.io/2024/03/20/python201/"/>
    <id>http://benpaodewoniu.github.io/2024/03/20/python201/</id>
    <published>2024-03-19T16:34:30.000Z</published>
    <updated>2024-03-19T16:51:35.247Z</updated>
    
    <content type="html"><![CDATA[<p>最佳爬虫浏览器。</p><a id="more"></a><p>访问 <a href="https://googlechromelabs.github.io/chrome-for-testing/">chrome-for-testing</a> 会发现有以下三种类型</p><ul><li>chrome<ul><li>正常的浏览器</li></ul></li><li><code>chrome-driver</code><ul><li><code>driver</code> 可以通过代码操作 <code>chrome</code> 和 <code>chrome-headless-shell</code></li></ul></li><li><code>chrome-headless-shell</code><ul><li><code>Chrome Headless Shell</code> 是 <code>Chrome</code> 浏览器的无界面版本，它提供了与标准 <code>Chrome</code> 浏览器相同的功能，但没有用户界面。</li><li><code>chrome</code> 也有无头模式，但是这个更好</li></ul></li></ul><h2 id="mac"><a href="#mac" class="headerlink" title="mac"></a>mac</h2><p>下载相关的 <code>mac</code> 包之后，基本上可以直接用 <code>driver</code> 操作 <code>chrome</code>。</p><p>代码如下</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> typing import Dict</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> selenium import webdriver</span><br><span class="line"></span><br><span class="line">chrome_options = webdriver.ChromeOptions()</span><br><span class="line">chrome_options.binary_location = <span class="string">"chrome-headless-shell 路径"</span></span><br><span class="line">driver = webdriver.Chrome(<span class="attribute">chrome_options</span>=chrome_options, <span class="attribute">executable_path</span>=<span class="string">"driver 路径"</span>)</span><br><span class="line">driver.<span class="builtin-name">get</span>(<span class="string">"https://baidu.com"</span>)</span><br><span class="line"><span class="comment"># 获取网页源代码</span></span><br><span class="line">page_source = driver.page_source</span><br><span class="line"></span><br><span class="line"><span class="comment"># 输出网页源代码</span></span><br><span class="line"><span class="builtin-name">print</span>(page_source)</span><br><span class="line">driver.close()</span><br></pre></td></tr></table></figure><h2 id="ubuntu"><a href="#ubuntu" class="headerlink" title="ubuntu"></a>ubuntu</h2><p>我的是 <code>ubuntu20.04</code>，并且我的是纯环境，所以有很多依赖没有装。</p><p>下载之后，你可以 <code>cd</code> 到解压目录，然后运行</p><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">./chrome-headless-shell</span> <span class="params">--disable-gpu</span> <span class="params">--dump-dom</span> https:<span class="string">//baidu.com</span></span><br></pre></td></tr></table></figure><p>看是否能把相关的页面打印出来。</p><p>我是缺少非常多的东西，我运行如下</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">sudo apt <span class="keyword">install</span> -y gconf-service libasound2 libatk1<span class="number">.0</span><span class="number">-0</span> libcups2 libgconf<span class="number">-2</span><span class="number">-4</span> libgtk<span class="number">-3</span><span class="number">-0</span> libnspr4 libx11-xcb1 libxcomposite1 libxdamage1 libxrandr2 libxslt1<span class="number">.1</span> libnss3 libxss1 libappindicator3<span class="number">-1</span> libindicator7 fonts-liberation xdg-utils</span><br><span class="line">sudo apt-<span class="keyword">get</span> <span class="keyword">install</span> libatk1<span class="number">.0</span><span class="number">-0</span></span><br><span class="line">sudo apt-<span class="keyword">get</span> <span class="keyword">install</span> libatk-bridge2<span class="number">.0</span><span class="number">-0</span></span><br><span class="line">sudo apt-<span class="keyword">get</span> <span class="keyword">install</span> libxcomposite1</span><br><span class="line">sudo apt-<span class="keyword">get</span> <span class="keyword">install</span> libxdamage1</span><br><span class="line">sudo apt-<span class="keyword">get</span> <span class="keyword">install</span> libxfixes3</span><br><span class="line">sudo apt-<span class="keyword">get</span> <span class="keyword">install</span> libxrandr2</span><br><span class="line">sudo apt-<span class="keyword">get</span> <span class="keyword">install</span> libgbm1</span><br><span class="line">sudo apt-<span class="keyword">get</span> <span class="keyword">install</span> libxkbcommon0</span><br></pre></td></tr></table></figure><p>上面安装代码不需要全部都运行，可以安装一个就试试命令，直到成功，或者缺什么补什么（问 <code>chatgpt</code>）</p><p>但是，你运行 mac 中的代码，还是可能会报错</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">Traceback (most recent <span class="keyword">call</span> <span class="keyword">last</span>):</span><br><span class="line">  <span class="keyword">File</span> <span class="string">"a.py"</span>, line <span class="number">11</span>, <span class="keyword">in</span> &lt;<span class="keyword">module</span>&gt;</span><br><span class="line">    driver = webdriver.Chrome(options=chrome_options, executable_path=db.get(<span class="string">"chrome_driver_path"</span>))</span><br><span class="line">  <span class="keyword">File</span> <span class="string">"/usr/local/src/python37/lib/python3.7/site-packages/selenium/webdriver/chrome/webdriver.py"</span>, line <span class="number">81</span>, <span class="keyword">in</span> __init__</span><br><span class="line">    desired_capabilities=desired_capabilities)</span><br><span class="line">  <span class="keyword">File</span> <span class="string">"/usr/local/src/python37/lib/python3.7/site-packages/selenium/webdriver/remote/webdriver.py"</span>, line <span class="number">157</span>, <span class="keyword">in</span> __init__</span><br><span class="line">    self.start_session(capabilities, browser_profile)</span><br><span class="line">  <span class="keyword">File</span> <span class="string">"/usr/local/src/python37/lib/python3.7/site-packages/selenium/webdriver/remote/webdriver.py"</span>, line <span class="number">252</span>, <span class="keyword">in</span> start_session</span><br><span class="line">    response = self.execute(Command.NEW_SESSION, <span class="keyword">parameters</span>)</span><br><span class="line">  <span class="keyword">File</span> <span class="string">"/usr/local/src/python37/lib/python3.7/site-packages/selenium/webdriver/remote/webdriver.py"</span>, line <span class="number">319</span>, <span class="keyword">in</span> <span class="keyword">execute</span></span><br><span class="line">    response = self.command_executor.execute(driver_command, params)</span><br><span class="line">  <span class="keyword">File</span> <span class="string">"/usr/local/src/python37/lib/python3.7/site-packages/selenium/webdriver/remote/remote_connection.py"</span>, line <span class="number">374</span>, <span class="keyword">in</span> <span class="keyword">execute</span></span><br><span class="line">    <span class="keyword">return</span> self._request(command_info[<span class="number">0</span>], <span class="keyword">url</span>, <span class="keyword">body</span>=<span class="keyword">data</span>)</span><br><span class="line">  <span class="keyword">File</span> <span class="string">"/usr/local/src/python37/lib/python3.7/site-packages/selenium/webdriver/remote/remote_connection.py"</span>, line <span class="number">397</span>, <span class="keyword">in</span> _request</span><br><span class="line">    resp = self._conn.request(method, <span class="keyword">url</span>, <span class="keyword">body</span>=<span class="keyword">body</span>, headers=headers)</span><br><span class="line">  <span class="keyword">File</span> <span class="string">"/usr/local/src/python37/lib/python3.7/site-packages/urllib3/_request_methods.py"</span>, line <span class="number">119</span>, <span class="keyword">in</span> request</span><br><span class="line">    method, <span class="keyword">url</span>, <span class="keyword">fields</span>=<span class="keyword">fields</span>, headers=headers, **urlopen_kw</span><br><span class="line">  <span class="keyword">File</span> <span class="string">"/usr/local/src/python37/lib/python3.7/site-packages/urllib3/_request_methods.py"</span>, line <span class="number">217</span>, <span class="keyword">in</span> request_encode_body</span><br><span class="line">    <span class="keyword">return</span> self.urlopen(method, <span class="keyword">url</span>, **extra_kw)</span><br><span class="line">  <span class="keyword">File</span> <span class="string">"/usr/local/src/python37/lib/python3.7/site-packages/urllib3/poolmanager.py"</span>, line <span class="number">432</span>, <span class="keyword">in</span> urlopen</span><br><span class="line">    <span class="keyword">conn</span> = self.connection_from_host(u.host, port=u.port, scheme=u.scheme)</span><br><span class="line">  <span class="keyword">File</span> <span class="string">"/usr/local/src/python37/lib/python3.7/site-packages/urllib3/poolmanager.py"</span>, line <span class="number">303</span>, <span class="keyword">in</span> connection_from_host</span><br><span class="line">    <span class="keyword">return</span> self.connection_from_context(request_context)</span><br><span class="line">  <span class="keyword">File</span> <span class="string">"/usr/local/src/python37/lib/python3.7/site-packages/urllib3/poolmanager.py"</span>, line <span class="number">328</span>, <span class="keyword">in</span> connection_from_context</span><br><span class="line">    <span class="keyword">return</span> self.connection_from_pool_key(pool_key, request_context=request_context)</span><br><span class="line">  <span class="keyword">File</span> <span class="string">"/usr/local/src/python37/lib/python3.7/site-packages/urllib3/poolmanager.py"</span>, line <span class="number">351</span>, <span class="keyword">in</span> connection_from_pool_key</span><br><span class="line">    pool = self._new_pool(scheme, host, port, request_context=request_context)</span><br><span class="line">  <span class="keyword">File</span> <span class="string">"/usr/local/src/python37/lib/python3.7/site-packages/urllib3/poolmanager.py"</span>, line <span class="number">265</span>, <span class="keyword">in</span> _new_pool</span><br><span class="line">    <span class="keyword">return</span> pool_cls(host, port, **request_context)</span><br><span class="line">  <span class="keyword">File</span> <span class="string">"/usr/local/src/python37/lib/python3.7/site-packages/urllib3/connectionpool.py"</span>, line <span class="number">197</span>, <span class="keyword">in</span> __init__</span><br><span class="line">    <span class="keyword">timeout</span> = Timeout.from_float(<span class="keyword">timeout</span>)</span><br><span class="line">  <span class="keyword">File</span> <span class="string">"/usr/local/src/python37/lib/python3.7/site-packages/urllib3/util/timeout.py"</span>, line <span class="number">190</span>, <span class="keyword">in</span> from_float</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">Timeout</span>(<span class="keyword">read</span>=<span class="keyword">timeout</span>, <span class="keyword">connect</span>=<span class="keyword">timeout</span>)</span><br><span class="line">  <span class="keyword">File</span> <span class="string">"/usr/local/src/python37/lib/python3.7/site-packages/urllib3/util/timeout.py"</span>, line <span class="number">119</span>, <span class="keyword">in</span> __init__</span><br><span class="line">    self._connect = self._validate_timeout(<span class="keyword">connect</span>, <span class="string">"connect"</span>)</span><br><span class="line">  <span class="keyword">File</span> <span class="string">"/usr/local/src/python37/lib/python3.7/site-packages/urllib3/util/timeout.py"</span>, line <span class="number">159</span>, <span class="keyword">in</span> _validate_timeout</span><br><span class="line">    ) <span class="keyword">from</span> <span class="keyword">None</span></span><br><span class="line">ValueError: <span class="keyword">Timeout</span> <span class="keyword">value</span> <span class="keyword">connect</span> was &lt;<span class="keyword">object</span> <span class="keyword">object</span> <span class="keyword">at</span> <span class="number">0x7f5a37a17070</span>&gt;, but it must be an <span class="built_in">int</span>, <span class="built_in">float</span> <span class="keyword">or</span> None.</span><br></pre></td></tr></table></figure><p>这个报错请参考</p><ul><li><a href="/2024/03/20/python202/">python | mac 和 ubuntu 上的最佳实践</a></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;最佳爬虫浏览器。&lt;/p&gt;
    
    </summary>
    
      <category term="应用" scheme="http://benpaodewoniu.github.io/categories/%E5%BA%94%E7%94%A8/"/>
    
      <category term="python" scheme="http://benpaodewoniu.github.io/categories/python/"/>
    
      <category term="chrome" scheme="http://benpaodewoniu.github.io/categories/%E5%BA%94%E7%94%A8/chrome/"/>
    
      <category term="模块" scheme="http://benpaodewoniu.github.io/categories/python/%E6%A8%A1%E5%9D%97/"/>
    
      <category term="selenium" scheme="http://benpaodewoniu.github.io/categories/python/%E6%A8%A1%E5%9D%97/selenium/"/>
    
    
      <category term="python" scheme="http://benpaodewoniu.github.io/tags/python/"/>
    
  </entry>
  
  <entry>
    <title>dfs | dfs</title>
    <link href="http://benpaodewoniu.github.io/2024/03/19/dfs0/"/>
    <id>http://benpaodewoniu.github.io/2024/03/19/dfs0/</id>
    <published>2024-03-19T03:18:50.000Z</published>
    <updated>2024-03-24T04:50:49.023Z</updated>
    
    <content type="html"><![CDATA[<div id="hexo-blog-encrypt" data-wpm="Oh, this is an invalid password. Check and try again, please." data-whm="OOPS, these decrypted content may changed, but you can still have a look.">  <div class="hbe-input-container">  <input type="password" id="hbePass" placeholder="" />    <label for="hbePass">密码等级 0 ！！！</label>    <div class="bottom-line"></div>  </div>  <script id="hbeData" type="hbeData" data-hmacdigest="047a4f6f8cbdc9e29778f9a18fbb86e40a042b6d98cf028f52bb3259ab56dba4">c2c0271af53dc94b898c4326cbd8aeee28c3116b22d777bb8dbba6fba51ded381cbf311f43a5537e4919bf58aa12ef44457e801cb065f1e3abe1c125d31032333fe9adb811df545464ecb651b8c04c8737b1d6e038024517151d0c1654b273bcccb7c4c1721b99389ff3b52e83ac6671451aa31a4ca098ef8e768a36ad2a66c4cc26832c241bd5514df82a8df4ab906ca6e79f5c7e9c4a99ff9abc6e21ee0aaf764b6f5b0f216a35b067b24c7d0c8bd92347c1d50be8cf8230a4e0e5c0a63ddcd6657cfc78520e96ea32f975ec279cf071037f2e0bcaead658bda49c54f5c521b7a2aa027c1cfbc6ab395f721ade571921a6992f992ee04df86a9c63c33f190796555980ea297ed23feef8976b79ee3aa7364e1f69dc7bbe8f18fcc1b0b730a7</script></div><script src="/lib/blog-encrypt.js"></script><link href="/css/blog-encrypt.css" rel="stylesheet" type="text/css">]]></content>
    
    <summary type="html">
    
      密码等级 0
    
    </summary>
    
      <category term="区块链" scheme="http://benpaodewoniu.github.io/categories/%E5%8C%BA%E5%9D%97%E9%93%BE/"/>
    
      <category term="dapp" scheme="http://benpaodewoniu.github.io/categories/%E5%8C%BA%E5%9D%97%E9%93%BE/dapp/"/>
    
      <category term="dfs" scheme="http://benpaodewoniu.github.io/categories/%E5%8C%BA%E5%9D%97%E9%93%BE/dapp/dfs/"/>
    
    
      <category term="dfs" scheme="http://benpaodewoniu.github.io/tags/dfs/"/>
    
  </entry>
  
  <entry>
    <title>mysql | 远程连接</title>
    <link href="http://benpaodewoniu.github.io/2024/03/15/mysql25/"/>
    <id>http://benpaodewoniu.github.io/2024/03/15/mysql25/</id>
    <published>2024-03-15T13:54:41.000Z</published>
    <updated>2024-03-19T17:01:24.895Z</updated>
    
    <content type="html"><![CDATA[<p>数据库允许远程连接。</p><a id="more"></a><ul><li>数据库端口 0.0.0.0 绑定</li><li>防火墙开启</li><li>端口允许进出</li><li>数据库修改权限<ul><li>use mysql</li><li>update user set Host=’%’ where User=’root’;</li><li>FLUSH PRIVILEGES;</li></ul></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;数据库允许远程连接。&lt;/p&gt;
    
    </summary>
    
      <category term="sql" scheme="http://benpaodewoniu.github.io/categories/sql/"/>
    
      <category term="mysql" scheme="http://benpaodewoniu.github.io/categories/sql/mysql/"/>
    
    
      <category term="数据库" scheme="http://benpaodewoniu.github.io/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/"/>
    
      <category term="mysql" scheme="http://benpaodewoniu.github.io/tags/mysql/"/>
    
  </entry>
  
  <entry>
    <title>mysql | Can&#39;t connect to local MySQL server through socket &#39;/var/run/mysqld/mysqld.sock&#39;</title>
    <link href="http://benpaodewoniu.github.io/2024/03/15/mysql24/"/>
    <id>http://benpaodewoniu.github.io/2024/03/15/mysql24/</id>
    <published>2024-03-15T07:11:53.000Z</published>
    <updated>2024-03-15T07:34:31.314Z</updated>
    
    <content type="html"><![CDATA[<p>在 ubuntu20.04 安装的时候出现这个。</p><a id="more"></a><p>查看 <code>mysql</code> 的配置，查看套接字。</p><p>一般在 <code>/etc/mysql/my.cnf</code> 中。默认套接字是 <code>/var/run/mysqld/mysqld.sock</code></p><p>进入 <code>/var/run</code> 发现 <code>mysqld</code> 确实没有权限，所以，给了一个权限</p><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo chmod <span class="number">777</span> mysqld</span><br></pre></td></tr></table></figure><p>然后进入 <code>mysqld</code> 新创建了 <code>mysqld.sock</code>,并且赋予权限。</p><p>重启 <code>mysql</code></p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo<span class="built_in"> service </span>mysql restart</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;在 ubuntu20.04 安装的时候出现这个。&lt;/p&gt;
    
    </summary>
    
      <category term="sql" scheme="http://benpaodewoniu.github.io/categories/sql/"/>
    
      <category term="mysql" scheme="http://benpaodewoniu.github.io/categories/sql/mysql/"/>
    
      <category term="问题排查" scheme="http://benpaodewoniu.github.io/categories/sql/mysql/%E9%97%AE%E9%A2%98%E6%8E%92%E6%9F%A5/"/>
    
    
      <category term="数据库" scheme="http://benpaodewoniu.github.io/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/"/>
    
      <category term="mysql" scheme="http://benpaodewoniu.github.io/tags/mysql/"/>
    
  </entry>
  
  <entry>
    <title>fluence | fluence</title>
    <link href="http://benpaodewoniu.github.io/2024/03/13/fluence0/"/>
    <id>http://benpaodewoniu.github.io/2024/03/13/fluence0/</id>
    <published>2024-03-12T16:04:11.000Z</published>
    <updated>2024-03-12T16:36:42.227Z</updated>
    
    <content type="html"><![CDATA[<div id="hexo-blog-encrypt" data-wpm="Oh, this is an invalid password. Check and try again, please." data-whm="OOPS, these decrypted content may changed, but you can still have a look.">  <div class="hbe-input-container">  <input type="password" id="hbePass" placeholder="" />    <label for="hbePass">密码等级 0 ！！！</label>    <div class="bottom-line"></div>  </div>  <script id="hbeData" type="hbeData" data-hmacdigest="cc51ae7fa8b0b1ebc5b38a905b949a2e21f904afa40764c8b8a582ceeb857bfd">c84733856d9a8442a67650969181657cf6048aeb07d87bfd5e102c10cdf806b8d260fb870d43c8c59a680d3481d62fa9c6c14c501896bc58ef602c4348cee6fc2b3a2441dec05356dfee61edf827b9ec71315880a7240f291043eb064e0c6f0300e0669d2cb8c507e4bb4872a7fcd764678c8d0ad8dee06cba6e2e0c9caa54c70947a58422e1657828bb97ae81ab88c0334403b2aff48434605a92e4ea9e72b13ed062b9ea5331504c5efbecde773826bcd20f505b6d59aee1b886f45937a677198dca127463c5ef0cf5bf4ae8a95e294da3dc4eae1dc8e68c3836e20104a406606e68482baf6e22802942cc8e3dd72c683f965fd0773b4bae8771dd0456d8a1cdd5d5706d25e38020733798cba0bd2c9e69b635c0490b57211aec8cf8e3c23cb116549afcdda01bd0a6d3857cf2ee938c9eb8cab899b9a36ac715bc3d6da9c55c2eba512a19048ead79a6ecc7570915531e20149cc4726dc913139aa339f751b4ad91981a281686e978a0b3cf618b709fad656cf0ad575bedf2d766fc8547b0f7feee88cd36e52aec42b1fed664daef</script></div><script src="/lib/blog-encrypt.js"></script><link href="/css/blog-encrypt.css" rel="stylesheet" type="text/css">]]></content>
    
    <summary type="html">
    
      密码等级 0
    
    </summary>
    
      <category term="区块链" scheme="http://benpaodewoniu.github.io/categories/%E5%8C%BA%E5%9D%97%E9%93%BE/"/>
    
      <category term="dapp" scheme="http://benpaodewoniu.github.io/categories/%E5%8C%BA%E5%9D%97%E9%93%BE/dapp/"/>
    
      <category term="fluence" scheme="http://benpaodewoniu.github.io/categories/%E5%8C%BA%E5%9D%97%E9%93%BE/dapp/fluence/"/>
    
    
      <category term="fluence" scheme="http://benpaodewoniu.github.io/tags/fluence/"/>
    
  </entry>
  
  <entry>
    <title>python | selenium 操纵已经打开的 chrome</title>
    <link href="http://benpaodewoniu.github.io/2024/03/11/python200/"/>
    <id>http://benpaodewoniu.github.io/2024/03/11/python200/</id>
    <published>2024-03-11T08:51:31.000Z</published>
    <updated>2024-03-11T11:07:53.105Z</updated>
    
    <content type="html"><![CDATA[<p>通过调试接口来操作已经打开的 <code>chrome</code>。</p><a id="more"></a><p>使用</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chrome.exe <span class="attribute">--remote-debugging-port</span>=9233 <span class="attribute">--user-data-dir</span>=<span class="string">"D:\chrome\1"</span></span><br></pre></td></tr></table></figure><p>打开 <code>chrome</code>。</p><p>代码如下</p><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> selenium <span class="keyword">import</span> webdriver</span><br><span class="line"><span class="keyword">from</span> selenium.webdriver.chrome.<span class="keyword">options</span> <span class="keyword">import</span> <span class="keyword">Options</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">options</span> = <span class="keyword">Options</span>()</span><br><span class="line"><span class="keyword">options</span>.add_experimental_option(<span class="string">"debuggerAddress"</span>, <span class="string">"127.0.0.1:9233"</span>)</span><br><span class="line">driver = webdriver.Chrome(<span class="keyword">options</span>=<span class="keyword">options</span>)</span><br><span class="line"></span><br><span class="line">window_rect = driver.get_window_rect()</span><br><span class="line"></span><br><span class="line"><span class="keyword">print</span>(<span class="string">"窗口左上角坐标:"</span>, window_rect[<span class="string">"x"</span>], window_rect[<span class="string">"y"</span>])</span><br><span class="line"><span class="keyword">print</span>(<span class="string">"窗口右下角坐标:"</span>, window_rect[<span class="string">"x"</span>] + window_rect[<span class="string">"width"</span>], window_rect[<span class="string">"y"</span>] + window_rect[<span class="string">"height"</span>])</span><br><span class="line"></span><br><span class="line"># 测试打印页面标题</span><br><span class="line"><span class="keyword">print</span>(driver.title)</span><br></pre></td></tr></table></figure><p>ps: 我把 <code>chromedriver.exe</code> 放在同级目录中。</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;通过调试接口来操作已经打开的 &lt;code&gt;chrome&lt;/code&gt;。&lt;/p&gt;
    
    </summary>
    
      <category term="python" scheme="http://benpaodewoniu.github.io/categories/python/"/>
    
      <category term="模块" scheme="http://benpaodewoniu.github.io/categories/python/%E6%A8%A1%E5%9D%97/"/>
    
      <category term="selenium" scheme="http://benpaodewoniu.github.io/categories/python/%E6%A8%A1%E5%9D%97/selenium/"/>
    
    
      <category term="python" scheme="http://benpaodewoniu.github.io/tags/python/"/>
    
  </entry>
  
  <entry>
    <title>wordpress | 多站点模式下访问某一文件夹文件返回 404</title>
    <link href="http://benpaodewoniu.github.io/2024/03/11/wordpress14/"/>
    <id>http://benpaodewoniu.github.io/2024/03/11/wordpress14/</id>
    <published>2024-03-11T08:38:44.000Z</published>
    <updated>2024-03-11T08:50:55.732Z</updated>
    
    <content type="html"><![CDATA[<p>这是 <code>wordpress</code> 的一个多站点问题。</p><a id="more"></a><p>介绍一下背景，假设域名为 <code>xxx.com</code>，现在新建了一个新的站点 <code>xxx.com/lumi</code>，现在这个站点的主题需要上传一个 <code>SDK</code>，假设这个 <code>SDK</code> 的文件夹名称为 <code>Extend</code>。</p><p>但是，在多站点的配置下，访问 <code>xxx.com/lumi/Extend/a.js</code> 返回 <code>404</code>。</p><p>我的 <code>wordpress</code> 是放置在 <code>/var/www/wordpress</code> 里面的。</p><p>所以，我将 <code>Extend</code> 上传到 <code>/var/www/wordpress/Extend</code> 或者 <code>/var/www/wordpress/lumi/Extend</code> 还是 <code>404</code>。</p><p>然后我修改 <code>nginx</code> 配置，添加</p><figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">location <span class="meta-keyword">/lumi/</span><span class="class">Extend </span>&#123;</span><br><span class="line">alias <span class="meta-keyword">/var/</span>www<span class="meta-keyword">/wordpress/</span>Extend;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>也不行，经过我长期的排查，最后发现是 <code>nginx</code> 多站点配置问题。</p><p><code>nginx</code> 多站配置为</p><ul><li><a href="/2024/02/28/wordpress3/">wordpress | wordpress 搭建(包含多站点)</a></li></ul><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Upstream to abstract backend connection(s) for php</span></span><br><span class="line"><span class="attribute">upstream</span> php &#123;</span><br><span class="line">        <span class="attribute">server</span> unix:/tmp/php-cgi.socket;</span><br><span class="line">        <span class="comment"># server 127.0.0.1:9000;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="section">server</span> &#123;</span><br><span class="line">        <span class="attribute">listen</span> <span class="number">80</span>;</span><br><span class="line">        <span class="comment">## Your website name goes here.</span></span><br><span class="line">        <span class="attribute">server_name</span> _;</span><br><span class="line">        <span class="comment">## Your only path reference.</span></span><br><span class="line">        <span class="attribute">root</span> /var/www/wordpress; <span class="comment"># wordpress 的放置路径</span></span><br><span class="line">        <span class="comment">## This should be in your http block and if it is, it's not needed here.</span></span><br><span class="line">        <span class="attribute">index</span> index.php;</span><br><span class="line"></span><br><span class="line">        <span class="attribute">location</span> = /favicon.ico &#123;</span><br><span class="line">                <span class="attribute">log_not_found</span> <span class="literal">off</span>;</span><br><span class="line">                <span class="attribute">access_log</span> <span class="literal">off</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="attribute">location</span> = /robots.txt &#123;</span><br><span class="line">                <span class="attribute">allow</span> all;</span><br><span class="line">                <span class="attribute">log_not_found</span> <span class="literal">off</span>;</span><br><span class="line">                <span class="attribute">access_log</span> <span class="literal">off</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="attribute">location</span> / &#123;</span><br><span class="line">                <span class="comment"># This is cool because no php is touched for static content.</span></span><br><span class="line">                <span class="comment"># include the "?$args" part so non-default permalinks doesn't break when using query string</span></span><br><span class="line">                <span class="attribute">try_files</span> <span class="variable">$uri</span> <span class="variable">$uri</span>/ /index.php?<span class="variable">$args</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="attribute">location</span> <span class="regexp">~ \.php$</span> &#123;</span><br><span class="line">                <span class="comment">#<span class="doctag">NOTE:</span> You should have "cgi.fix_pathinfo = 0;" in php.ini</span></span><br><span class="line">                <span class="attribute">include</span> fastcgi_params;</span><br><span class="line">                <span class="attribute">fastcgi_intercept_errors</span> <span class="literal">on</span>;</span><br><span class="line">                <span class="attribute">fastcgi_pass</span> php;</span><br><span class="line">                <span class="comment">#The following parameter can be also included in fastcgi_params file</span></span><br><span class="line">                <span class="attribute">fastcgi_param</span>  SCRIPT_FILENAME <span class="variable">$document_root</span><span class="variable">$fastcgi_script_name</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="attribute">location</span> <span class="regexp">~* \.(js|css|png|jpg|jpeg|gif|ico)$</span> &#123;</span><br><span class="line">                <span class="attribute">expires</span> max;</span><br><span class="line">                <span class="attribute">log_not_found</span> <span class="literal">off</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">#ignored: “-” thing used or unknown variable in regex/rew</span></span><br><span class="line">        <span class="attribute">rewrite</span><span class="regexp"> ^/([_0-9a-zA-Z-]+/)?wp-admin$</span> /<span class="variable">$1</span>wp-admin/ <span class="literal">permanent</span>;</span><br><span class="line"> </span><br><span class="line">        <span class="attribute">if</span> (-f <span class="variable">$request_filename</span>)&#123;</span><br><span class="line">            <span class="attribute">set</span> <span class="variable">$rule_2</span> <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="attribute">if</span> (-d <span class="variable">$request_filename</span>)&#123;</span><br><span class="line">            <span class="attribute">set</span> <span class="variable">$rule_2</span> <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="attribute">if</span> (<span class="variable">$rule_2</span> = <span class="string">"1"</span>)&#123;</span><br><span class="line">        <span class="comment">#ignored: “-” thing used or unknown variable in regex/rew</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="attribute">rewrite</span><span class="regexp"> ^/([_0-9a-zA-Z-]+/)?(wp-(content|admin|includes).*)</span> /<span class="variable">$2</span> <span class="literal">last</span>;</span><br><span class="line">        <span class="attribute">rewrite</span><span class="regexp"> ^/([_0-9a-zA-Z-]+/)?(.*.php)$</span> /<span class="variable">$2</span> <span class="literal">last</span>;</span><br><span class="line">        <span class="attribute">rewrite</span> /. /index.php <span class="literal">last</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>最后发现，是最后一句话</p><figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rewrite /. /<span class="keyword">index</span>.php <span class="keyword">last</span>;</span><br></pre></td></tr></table></figure><p>影响了。这句话是说，把所有的 <code>url</code> 都定向到 <code>index.php</code></p><p>所以，我们要对这句话进行改造，还要加入</p><figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">location <span class="meta-keyword">/lumi/</span><span class="class">Extend </span>&#123;</span><br><span class="line">alias <span class="meta-keyword">/var/</span>www<span class="meta-keyword">/wordpress/</span>Extend;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>最终为</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Upstream to abstract backend connection(s) for php</span></span><br><span class="line"><span class="attribute">upstream</span> php &#123;</span><br><span class="line">        <span class="attribute">server</span> unix:/run/php/php7.4-fpm.sock;</span><br><span class="line">        <span class="comment">#server 127.0.0.1:9000;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="section">server</span> &#123;</span><br><span class="line">        <span class="attribute">listen</span> <span class="number">80</span>;</span><br><span class="line">        <span class="comment">## Your website name goes here.</span></span><br><span class="line">       <span class="attribute">server_name</span> thlm.com www.thlm.com;</span><br><span class="line">       <span class="attribute">listen</span> <span class="number">443</span> ssl default_server;</span><br><span class="line">       <span class="attribute">listen</span> [::]:<span class="number">443</span> ssl default_server;<span class="comment">#新增这两个</span></span><br><span class="line">       <span class="attribute">ssl_certificate</span> /home/ubuntu/https/fullchain.crt;</span><br><span class="line">       <span class="attribute">ssl_certificate_key</span> /home/ubuntu/https/private.pem;</span><br><span class="line">       <span class="comment">#rewrite ^(.*) https://$server_name$1 permanent;</span></span><br><span class="line">       <span class="comment">#return 301 https://$host$request_uri;</span></span><br><span class="line">       </span><br><span class="line">        <span class="comment">## Your only path reference.</span></span><br><span class="line">        <span class="attribute">root</span> /var/www/wordpress; <span class="comment"># wordpress 的放置路径</span></span><br><span class="line">        <span class="comment">## This should be in your http block and if it is, it's not needed here.</span></span><br><span class="line">        <span class="attribute">index</span> index.php;</span><br><span class="line"></span><br><span class="line">        <span class="attribute">location</span> = /favicon.ico &#123;</span><br><span class="line">                <span class="attribute">log_not_found</span> <span class="literal">off</span>;</span><br><span class="line">                <span class="attribute">access_log</span> <span class="literal">off</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="attribute">location</span> = /robots.txt &#123;</span><br><span class="line">                <span class="attribute">allow</span> all;</span><br><span class="line">                <span class="attribute">log_not_found</span> <span class="literal">off</span>;</span><br><span class="line">                <span class="attribute">access_log</span> <span class="literal">off</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="attribute">location</span> /lumi/Extend &#123;</span><br><span class="line">           <span class="attribute">alias</span> /var/www/wordpress/Extend/;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="attribute">location</span> / &#123;</span><br><span class="line">                <span class="comment"># This is cool because no php is touched for static content.</span></span><br><span class="line">                <span class="comment"># include the "?$args" part so non-default permalinks doesn't break when using query string</span></span><br><span class="line">                <span class="attribute">try_files</span> <span class="variable">$uri</span> <span class="variable">$uri</span>/ /index.php?<span class="variable">$args</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="attribute">location</span> <span class="regexp">~ \.php$</span> &#123;</span><br><span class="line">                <span class="comment">#<span class="doctag">NOTE:</span> You should have "cgi.fix_pathinfo = 0;" in php.ini</span></span><br><span class="line">                <span class="attribute">include</span> fastcgi_params;</span><br><span class="line">                <span class="attribute">fastcgi_intercept_errors</span> <span class="literal">on</span>;</span><br><span class="line">                <span class="attribute">fastcgi_pass</span> php;</span><br><span class="line">                <span class="comment">#The following parameter can be also included in fastcgi_params file</span></span><br><span class="line">                <span class="attribute">fastcgi_param</span>  SCRIPT_FILENAME <span class="variable">$document_root</span><span class="variable">$fastcgi_script_name</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="attribute">location</span> <span class="regexp">~* \.(js|css|png|jpg|jpeg|gif|ico)$</span> &#123;</span><br><span class="line">                <span class="attribute">expires</span> max;</span><br><span class="line">                <span class="attribute">log_not_found</span> <span class="literal">on</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">#ignored: “-” thing used or unknown variable in regex/rew</span></span><br><span class="line">        <span class="attribute">rewrite</span><span class="regexp"> ^/([_0-9a-zA-Z-]+/)?wp-admin$</span> /<span class="variable">$1</span>wp-admin/ <span class="literal">permanent</span>;</span><br><span class="line"> </span><br><span class="line">        <span class="attribute">if</span> (-f <span class="variable">$request_filename</span>)&#123;</span><br><span class="line">            <span class="attribute">set</span> <span class="variable">$rule_2</span> <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="attribute">if</span> (-d <span class="variable">$request_filename</span>)&#123;</span><br><span class="line">            <span class="attribute">set</span> <span class="variable">$rule_2</span> <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="attribute">if</span> (<span class="variable">$rule_2</span> = <span class="string">"1"</span>)&#123;</span><br><span class="line">        <span class="comment">#ignored: “-” thing used or unknown variable in regex/rew</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="attribute">rewrite</span><span class="regexp"> ^/([_0-9a-zA-Z-]+/)?(wp-(content|admin|includes).*)</span> /<span class="variable">$2</span> <span class="literal">last</span>;</span><br><span class="line">        <span class="attribute">rewrite</span><span class="regexp"> ^/([_0-9a-zA-Z-]+/)?(.*.php)$</span> /<span class="variable">$2</span> <span class="literal">last</span>;</span><br><span class="line">       <span class="attribute">rewrite</span><span class="regexp"> ^/(?!lumi/Extend)(.*)$</span> /index.php?<span class="variable">$1</span> <span class="literal">last</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>完美解决。</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;这是 &lt;code&gt;wordpress&lt;/code&gt; 的一个多站点问题。&lt;/p&gt;
    
    </summary>
    
      <category term="网站设计" scheme="http://benpaodewoniu.github.io/categories/%E7%BD%91%E7%AB%99%E8%AE%BE%E8%AE%A1/"/>
    
      <category term="WordPress" scheme="http://benpaodewoniu.github.io/categories/%E7%BD%91%E7%AB%99%E8%AE%BE%E8%AE%A1/WordPress/"/>
    
      <category term="基础" scheme="http://benpaodewoniu.github.io/categories/%E7%BD%91%E7%AB%99%E8%AE%BE%E8%AE%A1/WordPress/%E5%9F%BA%E7%A1%80/"/>
    
    
      <category term="WordPress" scheme="http://benpaodewoniu.github.io/tags/WordPress/"/>
    
  </entry>
  
  <entry>
    <title>wordpress | 单站点迁移到多站点的免费方案</title>
    <link href="http://benpaodewoniu.github.io/2024/03/09/wordpress13/"/>
    <id>http://benpaodewoniu.github.io/2024/03/09/wordpress13/</id>
    <published>2024-03-08T16:09:05.000Z</published>
    <updated>2024-03-09T03:35:20.818Z</updated>
    
    <content type="html"><![CDATA[<p>这个场景是，你有一个单站点的站，想要迁移到另外一个干净的服务器上，并且，把单站点迁移过去后开启多站点模式。</p><p>注意，不是把单站点数据迁移到已经是多站点的网站中。</p><a id="more"></a><ul><li>解析域名至 IP<ul><li><a href="/2021/08/15/web2/">阿里云 ｜ 域名解析</a></li></ul></li><li>域名访问<ul><li>有一个特别奇怪的点，我用 <code>***.com</code> 安装可以，用 <code>www.***.com</code> 安装不行</li><li>上述原因具体没深究</li></ul></li><li>wordpress 搭建<ul><li><a href="/2024/02/28/wordpress3/">wordpress | wordpress 搭建</a></li></ul></li><li>数据 copy<ul><li><a href="/2024/03/06/wordpress7/">wordpress | All-in-One WP Migration 用法/网站迁移</a></li></ul></li><li>多站点开启<ul><li><a href="/2024/02/28/wordpress3/">wordpress | wordpress 搭建 | 里面的多站点开启</a></li><li><a href="/2024/03/08/wordpress8/">wordpress | 多站点开启域名访问</a></li></ul></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;这个场景是，你有一个单站点的站，想要迁移到另外一个干净的服务器上，并且，把单站点迁移过去后开启多站点模式。&lt;/p&gt;
&lt;p&gt;注意，不是把单站点数据迁移到已经是多站点的网站中。&lt;/p&gt;
    
    </summary>
    
      <category term="网站设计" scheme="http://benpaodewoniu.github.io/categories/%E7%BD%91%E7%AB%99%E8%AE%BE%E8%AE%A1/"/>
    
      <category term="WordPress" scheme="http://benpaodewoniu.github.io/categories/%E7%BD%91%E7%AB%99%E8%AE%BE%E8%AE%A1/WordPress/"/>
    
      <category term="基础" scheme="http://benpaodewoniu.github.io/categories/%E7%BD%91%E7%AB%99%E8%AE%BE%E8%AE%A1/WordPress/%E5%9F%BA%E7%A1%80/"/>
    
    
      <category term="WordPress" scheme="http://benpaodewoniu.github.io/tags/WordPress/"/>
    
  </entry>
  
  <entry>
    <title>wordpress | 多站点的备份和还原</title>
    <link href="http://benpaodewoniu.github.io/2024/03/08/wordpress12/"/>
    <id>http://benpaodewoniu.github.io/2024/03/08/wordpress12/</id>
    <published>2024-03-08T08:57:18.000Z</published>
    <updated>2024-03-08T15:54:28.159Z</updated>
    
    <content type="html"><![CDATA[<div id="hexo-blog-encrypt" data-wpm="Oh, this is an invalid password. Check and try again, please." data-whm="OOPS, these decrypted content may changed, but you can still have a look.">  <div class="hbe-input-container">  <input type="password" id="hbePass" placeholder="" />    <label for="hbePass">密码等级 0 ！！！</label>    <div class="bottom-line"></div>  </div>  <script id="hbeData" type="hbeData" data-hmacdigest="7897da5d20c8d50b6162174d9f409ba9ced4c97400c1bd0e72189fa752a6ddb0">fb5f718e6cd4ecf9fa0f2221e9cbbe3904c2bbb6243c5e04dce4786082e712d8480e4d37dc1100296908fe8b572449e110ebdc0ecd9abc3c69e48bf9a21500df375d13a7ea917f91c867c49470fe392cf71007d308e40477e8d475ea784ced0cb76cab0f5a6e2067ea1c632791080534e0731bce01f32690f887bf9c1fda21baf390b21aa0ec797a3b20f1fcf3e61544304691ffdd8eeaf3dac672698ee0651b73ddf126eed64c32a91a48964623f23a765400a2cc990b20cdfffde5070b55ce9548257b4aa9fbf02b96743ba4ceccaf7a2447deafbc0870987255a7f4a572cb2416bf72e1f5ff5c0a71dae600be7ae91a444c913af4e14e6fc90a4e51539129db4102d07140eea745745f18c0752589e0686b978912a03cf33d7554a065d6ef824a26edb6e9ea7587cf0ab1390fc39cfdbb5fe1bbd840cb36c126dbb165f6b760e52a639e5fafc39745f74ef1d10c14af6a70b87db849363507d2726725822adf313c678e19a4ed63c2ce23a7e2d85978a0b2851f9096e69f9ddf8075f5bb3369b7c0757e1822e838e5ad9892a07ca850642a069d9d6dc675c85312a12e3dc80b209cc2dee13e5b3e826633951aad0b10fdbb1fc67c2ee973bb741e72fecf6a1c61da48779e291d52356cef9911154438d7d36afc73d248c7bf1ad4d9b94b8b2714b35f10638b02e8c2cd1c2178911c93b0822b5ea64014f6b1b45036ef1c067f61e91b88954ec584b90b6762b3b856f7fd6a6a2824a7d0a3db86c24f154875c53e1901ccdea54f8c575e4f7d8a7de6a005379e613fe568295c0649489454cb70d998d7f8bf74fafb19de7f776d1f64ffaacc2cc7080b007a860482dbdfd229600932f085bb1dc154b78892f9c695b089a59d7893fde3ccdaef5941d0c64ab22130b4d68058b5ceeebd12f74380f8b5105f5a790ff6fd150a89e63df433bc55f0545f8cc4b8802f387d593b1f864d3dded63cb8ca2cb077956d5c758df33e3456d62d86f726e64188c654b9f4acd737a41c4aa9a23bcb40c85b93a529f3b57ed04efa00faebe1280cfd70cf45c75555adc6ccb3e959631fed85e4fe3ed737c3d9475234b2df43fbae29cda98a90ce194374bea52f0029e6cda220e25fc0d5ddbd42834c3a020e4c08b006d0bc289ce41cdf9b3ce14bd683396b493296a5b1e22994e0cb47cb2d05e2c5705708f33291782df10e4699e66fe8b4fd4152d41ab6b47dc9c1355f32bdad07ce3e7ed0af2918f060f736ed1807e0ac866048e65ae090905c1f1f64b2b87680a4b4b856068f9fbccce5b16e9ba2956c4baa8d6ac438186fe94026301cfa692bbed625fcee3c328727a25b197d7bfd71bd43cdd4643666f818600a1a5e6a16efa45d1bed254058467174ebb70450df18edce85cb0411b32367fe967fa91ad21bde8f50972bb87604df5d7aa23ba2179382d3a6f7216e7a02c4d7243889491e4680619526394f676a04cb3cf89bef8725adf90af3490f</script></div><script src="/lib/blog-encrypt.js"></script><link href="/css/blog-encrypt.css" rel="stylesheet" type="text/css">]]></content>
    
    <summary type="html">
    
      密码等级 0
    
    </summary>
    
      <category term="网站设计" scheme="http://benpaodewoniu.github.io/categories/%E7%BD%91%E7%AB%99%E8%AE%BE%E8%AE%A1/"/>
    
      <category term="WordPress" scheme="http://benpaodewoniu.github.io/categories/%E7%BD%91%E7%AB%99%E8%AE%BE%E8%AE%A1/WordPress/"/>
    
      <category term="插件" scheme="http://benpaodewoniu.github.io/categories/%E7%BD%91%E7%AB%99%E8%AE%BE%E8%AE%A1/WordPress/%E6%8F%92%E4%BB%B6/"/>
    
      <category term="All-in-One WP Migration" scheme="http://benpaodewoniu.github.io/categories/%E7%BD%91%E7%AB%99%E8%AE%BE%E8%AE%A1/WordPress/%E6%8F%92%E4%BB%B6/All-in-One-WP-Migration/"/>
    
    
      <category term="WordPress" scheme="http://benpaodewoniu.github.io/tags/WordPress/"/>
    
  </entry>
  
  <entry>
    <title>wordpress | wordpress 卸载和安装</title>
    <link href="http://benpaodewoniu.github.io/2024/03/08/wordpress11/"/>
    <id>http://benpaodewoniu.github.io/2024/03/08/wordpress11/</id>
    <published>2024-03-08T08:44:49.000Z</published>
    <updated>2024-03-08T08:47:29.171Z</updated>
    
    <content type="html"><![CDATA[<p>很简单，只需要把对应的数据库和文件删除就好了。</p><a id="more"></a><ul><li><a href="/2024/02/28/wordpress3/">wordpress | wordpress 搭建</a></li></ul><p>如上面这个配置，我会删除数据库 <code>wordpress-db</code> 和 <code>/var/www/wordpress</code> 目录，然后重新安装 <code>wordpress</code> 就好了，即上面博文的 <code>6</code> 步骤。</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;很简单，只需要把对应的数据库和文件删除就好了。&lt;/p&gt;
    
    </summary>
    
      <category term="网站设计" scheme="http://benpaodewoniu.github.io/categories/%E7%BD%91%E7%AB%99%E8%AE%BE%E8%AE%A1/"/>
    
      <category term="WordPress" scheme="http://benpaodewoniu.github.io/categories/%E7%BD%91%E7%AB%99%E8%AE%BE%E8%AE%A1/WordPress/"/>
    
      <category term="基础" scheme="http://benpaodewoniu.github.io/categories/%E7%BD%91%E7%AB%99%E8%AE%BE%E8%AE%A1/WordPress/%E5%9F%BA%E7%A1%80/"/>
    
    
      <category term="WordPress" scheme="http://benpaodewoniu.github.io/tags/WordPress/"/>
    
  </entry>
  
  <entry>
    <title>wordpress | 将 wordpress 的 http 变成 https</title>
    <link href="http://benpaodewoniu.github.io/2024/03/08/wordpress10/"/>
    <id>http://benpaodewoniu.github.io/2024/03/08/wordpress10/</id>
    <published>2024-03-08T07:11:10.000Z</published>
    <updated>2024-03-20T03:47:21.131Z</updated>
    
    <content type="html"><![CDATA[<p>我的架构如下</p><ul><li><a href="/2024/02/28/wordpress3/">wordpress | wordpress 搭建</a></li></ul><a id="more"></a><ul><li><a href="https://blog.csdn.net/wy_97/article/details/101101395">wordpress+nginx配置https/使用letsencrypt</a></li><li><a href="https://juejin.cn/post/7044911075480829959">Nginx配置HTTP跳转到HTTPS</a></li></ul><p>注册账号后进行申请，然后验证，如图</p><p><img src="/images/wordpress/10_0.png" alt=""></p><p>然后把相关内容填写到域名解析那里</p><p><img src="/images/wordpress/10_1.png" alt=""></p><p>如果通过验证，那么你会下载一些文件，将文件上传到服务器上，比如，我就是 <code>/home/ubuntu/https</code></p><p>然后，<code>nginx</code> 开始配置</p><figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="class">server </span>&#123;</span><br><span class="line">       listen <span class="number">80</span>;</span><br><span class="line">       <span class="meta">## Your website name goes here.</span></span><br><span class="line">       server_name thlm.bond www.thlm.bond;</span><br><span class="line">       listen <span class="number">443</span> ssl default_server;</span><br><span class="line">       listen [::]:<span class="number">443</span> ssl default_server;<span class="meta">#新增这两个</span></span><br><span class="line">       ssl_certificate <span class="meta-keyword">/home/</span>ubuntu<span class="meta-keyword">/https/</span>fullchain.crt; <span class="meta"># 路径和你上传保持一致</span></span><br><span class="line">       ssl_certificate_key <span class="meta-keyword">/home/</span>ubuntu<span class="meta-keyword">/https/</span>private.pem; <span class="meta"># 路径和你上传保持一致</span></span><br><span class="line">       ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>上面的搭建可知，我的配置文件是 <code>/etc/nginx/sites-available/wordpress.conf</code>。</p><p>但是，我上面的配置，如果想要强制把 <code>http</code> 转为 <code>https</code>，总会出错。</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;我的架构如下&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;/2024/02/28/wordpress3/&quot;&gt;wordpress | wordpress 搭建&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
    
    </summary>
    
      <category term="网站设计" scheme="http://benpaodewoniu.github.io/categories/%E7%BD%91%E7%AB%99%E8%AE%BE%E8%AE%A1/"/>
    
      <category term="WordPress" scheme="http://benpaodewoniu.github.io/categories/%E7%BD%91%E7%AB%99%E8%AE%BE%E8%AE%A1/WordPress/"/>
    
      <category term="基础" scheme="http://benpaodewoniu.github.io/categories/%E7%BD%91%E7%AB%99%E8%AE%BE%E8%AE%A1/WordPress/%E5%9F%BA%E7%A1%80/"/>
    
      <category term="https" scheme="http://benpaodewoniu.github.io/categories/%E7%BD%91%E7%AB%99%E8%AE%BE%E8%AE%A1/https/"/>
    
      <category term="letsencrypt" scheme="http://benpaodewoniu.github.io/categories/%E7%BD%91%E7%AB%99%E8%AE%BE%E8%AE%A1/https/letsencrypt/"/>
    
    
      <category term="WordPress" scheme="http://benpaodewoniu.github.io/tags/WordPress/"/>
    
  </entry>
  
</feed>
