<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>犀牛的博客</title>
  
  <subtitle>姑苏城外一茅屋，万树梅花月满天</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://benpaodewoniu.github.io/"/>
  <updated>2024-06-27T07:14:04.425Z</updated>
  <id>http://benpaodewoniu.github.io/</id>
  
  <author>
    <name>犀牛</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>tcp | 防御 TCP/IP 的攻击</title>
    <link href="http://benpaodewoniu.github.io/2024/06/27/tcp0/"/>
    <id>http://benpaodewoniu.github.io/2024/06/27/tcp0/</id>
    <published>2024-06-27T01:27:21.000Z</published>
    <updated>2024-06-27T07:14:04.425Z</updated>
    
    <content type="html"><![CDATA[<p>这里的防御指的是 <code>TCP/IP</code> 层的 <code>DDOS</code>。</p><p>主要是比较</p><ul><li><code>AWS</code></li><li><code>CloudFlare</code></li></ul><a id="more"></a><h2 id="AWS"><a href="#AWS" class="headerlink" title="AWS"></a>AWS</h2><p>现在 <code>AWS</code> 提供 <code>4</code> 款产品，</p><ul><li><code>cloudfront</code></li><li><code>WAF</code></li><li><code>shield</code></li><li><code>shield adv</code></li></ul><p>其中，<code>cloudfront</code> 是 <code>CDN</code>，<code>WAF</code> 是第 <code>7</code> 层的防御，也就是 <code>HTTP</code> 层的 <code>DDOS</code> 防御。</p><p>相当于，<code>cloudflare</code> 的 免费版本 = <code>cloudfront</code> + <code>WAF</code>，当然，<code>AWS</code> 可能对大陆更友好一些。这两个产品并不防御 <code>TCP</code> 的 <code>DDOS</code>，只防御 <code>HTTP</code> 层的。</p><p>另外，两款，<code>shield</code> 和 <code>shield adv</code> 是防御 <code>TCP</code> 攻击的。</p><p><code>shield</code> 是所有设备自带的，它的作用是，如果 <code>AWS</code> 其他机器被 <code>TCP DDOS</code> 攻击后，你的机器不受影响。</p><p><code>shield adv</code> 是我们要采购的产品，其定价为 <code>3000U</code> 一个月，年付。并且，<code>3000U</code> 是最低费用。</p><p>他们是这样收费的，这个账号购买了 <code>shield adv</code> 产品后，账号下的所有机器都可以开启该功能，域名和端口不限制数量。</p><p>但是，上面的 <code>3000U</code> 只是所谓的入场券费，如果真的有 <code>DDOS</code> 打进来，还要根据流量来付流量费，如果需要技术支持，还要费一种叫做 <code>srt</code> 的费用。</p><p>当然，够买了 <code>shield adv</code> 之后，会赠送一些基础的 <code>WAF</code> 服务。</p><h3 id="优点"><a href="#优点" class="headerlink" title="优点"></a>优点</h3><ul><li>以账号购买，所有机器、域名、端口都能享受到</li><li>大陆用户相对友好</li></ul><h3 id="缺点"><a href="#缺点" class="headerlink" title="缺点"></a>缺点</h3><ul><li>攻击是根据 <code>DDOS</code> 流量付费的</li></ul><h2 id="Cloudflare"><a href="#Cloudflare" class="headerlink" title="Cloudflare"></a>Cloudflare</h2><p><code>CF</code> 的企业级套餐「最高付费套餐，其他两个付费套餐防不了全部 <code>TCP</code> 端口，几乎没啥用」是以账号购买，账号下可以建立多个项目，其中，企业级套餐每月最底消费是 <code>5000U</code>，至少付 <code>12</code> 个月。</p><p>如果签订后，需要进行合同签署。</p><h3 id="优点-1"><a href="#优点-1" class="headerlink" title="优点"></a>优点</h3><ul><li>无上限防御</li><li>也可以让 <code>CF</code> 建立大陆节点「估计非常贵」</li></ul><h3 id="缺点-1"><a href="#缺点-1" class="headerlink" title="缺点"></a>缺点</h3><ul><li><code>5000</code> 只是个基础，增加域名，端口都要付费</li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;这里的防御指的是 &lt;code&gt;TCP/IP&lt;/code&gt; 层的 &lt;code&gt;DDOS&lt;/code&gt;。&lt;/p&gt;
&lt;p&gt;主要是比较&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;AWS&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;CloudFlare&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
    
    </summary>
    
      <category term="网站设计" scheme="http://benpaodewoniu.github.io/categories/%E7%BD%91%E7%AB%99%E8%AE%BE%E8%AE%A1/"/>
    
      <category term="服务商" scheme="http://benpaodewoniu.github.io/categories/%E7%BD%91%E7%AB%99%E8%AE%BE%E8%AE%A1/%E6%9C%8D%E5%8A%A1%E5%95%86/"/>
    
      <category term="AWS" scheme="http://benpaodewoniu.github.io/categories/%E7%BD%91%E7%AB%99%E8%AE%BE%E8%AE%A1/%E6%9C%8D%E5%8A%A1%E5%95%86/AWS/"/>
    
      <category term="Cloudflare" scheme="http://benpaodewoniu.github.io/categories/%E7%BD%91%E7%AB%99%E8%AE%BE%E8%AE%A1/%E6%9C%8D%E5%8A%A1%E5%95%86/Cloudflare/"/>
    
      <category term="tcp" scheme="http://benpaodewoniu.github.io/categories/%E7%BD%91%E7%AB%99%E8%AE%BE%E8%AE%A1/tcp/"/>
    
      <category term="Shield" scheme="http://benpaodewoniu.github.io/categories/%E7%BD%91%E7%AB%99%E8%AE%BE%E8%AE%A1/%E6%9C%8D%E5%8A%A1%E5%95%86/AWS/Shield/"/>
    
    
      <category term="tcp" scheme="http://benpaodewoniu.github.io/tags/tcp/"/>
    
  </entry>
  
  <entry>
    <title>aws | 流量走内网</title>
    <link href="http://benpaodewoniu.github.io/2024/06/24/aws5/"/>
    <id>http://benpaodewoniu.github.io/2024/06/24/aws5/</id>
    <published>2024-06-24T15:47:42.000Z</published>
    <updated>2024-06-24T16:34:21.087Z</updated>
    
    <content type="html"><![CDATA[<p>图中的网络区域选择一样的就行。</p><a id="more"></a><p><img src="/images/aws/5_0.png" alt=""></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;图中的网络区域选择一样的就行。&lt;/p&gt;
    
    </summary>
    
      <category term="网站设计" scheme="http://benpaodewoniu.github.io/categories/%E7%BD%91%E7%AB%99%E8%AE%BE%E8%AE%A1/"/>
    
      <category term="服务商" scheme="http://benpaodewoniu.github.io/categories/%E7%BD%91%E7%AB%99%E8%AE%BE%E8%AE%A1/%E6%9C%8D%E5%8A%A1%E5%95%86/"/>
    
      <category term="AWS" scheme="http://benpaodewoniu.github.io/categories/%E7%BD%91%E7%AB%99%E8%AE%BE%E8%AE%A1/%E6%9C%8D%E5%8A%A1%E5%95%86/AWS/"/>
    
    
      <category term="aws" scheme="http://benpaodewoniu.github.io/tags/aws/"/>
    
  </entry>
  
  <entry>
    <title>aion | 搭建一个测试服务器</title>
    <link href="http://benpaodewoniu.github.io/2024/06/24/aion2/"/>
    <id>http://benpaodewoniu.github.io/2024/06/24/aion2/</id>
    <published>2024-06-24T15:42:18.000Z</published>
    <updated>2024-06-27T07:04:23.420Z</updated>
    
    <content type="html"><![CDATA[<p>这里要搭建的是一个最高在线 <code>2000 - 4000</code> 人的大型 <code>MMO</code> 游戏的游戏服务器。</p><a id="more"></a><p>目标是</p><ul><li>抵御 <code>DDOS</code></li><li>用户有良好的访问体验</li></ul><h2 id="服务器选择"><a href="#服务器选择" class="headerlink" title="服务器选择"></a>服务器选择</h2><p>因为，这只是删档测试，所以，不需要考虑多服务器，多地区的情况。这里采用的架构是 <code>gameserver</code>「计算服务器」+ <code>dataserver</code>「数据服务器」。</p><p>关于配置就不说了，根据实际情况来就行，这次肯定是按照基本配置的两倍来配比的。</p><p>购买的是 AWS 服务器，要记住把没用的端口全部关了，包括 <code>80</code>.然后 <code>22</code> 的 <code>ssh</code> 端口也要进行修改。</p><h2 id="DDOS-防御商的选择"><a href="#DDOS-防御商的选择" class="headerlink" title="DDOS 防御商的选择"></a>DDOS 防御商的选择</h2><p>因为在 <code>AWS</code> 中，所以，防御商有两个</p><ul><li><code>cloudfront</code><ul><li><code>AWS</code> 自己的</li></ul></li><li><code>cloudflare</code></li></ul><p>毫无疑问，肯定 <code>cloudflare</code>。因为，<code>CF</code> 的防御是无上限流量，其他的服务商，都是免费了一定的流量，超过后开始计费，并且，收费非常贵。真要有 <code>DDOS</code> 打过来，账单直接 <code>GG</code>。</p><p>这里说一下存在的情况。游戏服务器总共有两种通信协议</p><ul><li><code>https</code>「<code>443</code>」</li><li><code>TCP + Socket</code>「其他端口」</li></ul><p>所以，这里面只有两个选择</p><ul><li><code>CF</code> 免费版本 + <code>TCP</code> 措施</li><li><code>CF</code> 最高付费版本<ul><li>没尝试过</li></ul></li></ul><p>至于 <code>CF</code> 其他两个付费版本可以忽略，和免费版本差别不大。</p><h3 id="CF-免费版本-TCP-措施"><a href="#CF-免费版本-TCP-措施" class="headerlink" title="CF 免费版本 + TCP 措施"></a>CF 免费版本 + TCP 措施</h3><p>游戏服务器，共有两个子域名</p><ul><li><code>aa</code><ul><li>走 <code>https</code> 协议</li><li>走 <code>CF</code> 代理</li></ul></li><li><code>cc</code><ul><li>走 <code>tcp + socket</code> 协议</li><li>走 <code>CF DNS</code> 直连模式</li></ul></li></ul><p>所以，<code>aa</code> 可以进行 <code>CF</code> 代理模式，而 <code>cc</code> 由于走 <code>tcp</code> 所以无法进行 <code>CF</code> 代理模式，只能选择直连。至于为什么请参考。</p><ul><li><a href="/2024/06/24/cloudflare0/">cloudflare | CF 的简单应用</a></li></ul><p>如果，<code>cc</code> 走直连的话，会出现问题，假如有人进行抓包，很容易获得目标服务器的 <code>IP</code>，那么，<code>CF</code> 形同虚设了。</p><p>所以，要把 <code>cc</code> 的 <code>TCP</code> 流量也走一层代理。免费版本的 <code>CF</code> 肯定指望不上了，但是，可以用 <code>nginx</code> 进行代理转发。</p><ul><li><a href="/2024/06/24/nginx12/">nginx | 转发 tcp 端口流量</a></li></ul><p>这样子，整个服务器的架构又增加了一个代理服务器。</p><p><code>3</code> 个服务器之间的数据传递如下</p><ul><li><code>aa</code> 子域名，走 <code>https</code> 协议，通过 <code>CF</code> 的代理转发给 <code>gameserver</code> 服务器上</li><li><code>cc</code> 子域名走 <code>TCP</code> 协议，先通信到代理服务器上，然后通过代理服务器从内网走到 <code>gameserver</code> 服务器上</li></ul><p>由于代理服务器只是进行状态的转发，硬件配置不需要很大，<code>2核4G</code>足够了，带宽大一些即可。「如果觉得一个代理服务器不够，可以进行 <code>DNS</code> 负载均衡，上多个代理服务器」</p><p>代理和 <code>gameserver</code> 能走内网就走内网。</p><p>这个方案当然不能防御住 <code>TCP/IP</code> 的攻击，但是，可以有效的将服务器的 <code>IP</code> 隐藏起来。后续万一出问题，也可以建立防护。但是，一旦 <code>IP</code> 暴漏，后续啥措施都没用了。</p><p>关于 <code>TCP/IP</code> 层的第三方防御请参考。</p><ul><li><a href=""></a></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;这里要搭建的是一个最高在线 &lt;code&gt;2000 - 4000&lt;/code&gt; 人的大型 &lt;code&gt;MMO&lt;/code&gt; 游戏的游戏服务器。&lt;/p&gt;
    
    </summary>
    
      <category term="项目经历" scheme="http://benpaodewoniu.github.io/categories/%E9%A1%B9%E7%9B%AE%E7%BB%8F%E5%8E%86/"/>
    
      <category term="大型" scheme="http://benpaodewoniu.github.io/categories/%E9%A1%B9%E7%9B%AE%E7%BB%8F%E5%8E%86/%E5%A4%A7%E5%9E%8B/"/>
    
      <category term="aion" scheme="http://benpaodewoniu.github.io/categories/%E9%A1%B9%E7%9B%AE%E7%BB%8F%E5%8E%86/%E5%A4%A7%E5%9E%8B/aion/"/>
    
      <category term="运维" scheme="http://benpaodewoniu.github.io/categories/%E9%A1%B9%E7%9B%AE%E7%BB%8F%E5%8E%86/%E5%A4%A7%E5%9E%8B/aion/%E8%BF%90%E7%BB%B4/"/>
    
    
      <category term="aion" scheme="http://benpaodewoniu.github.io/tags/aion/"/>
    
  </entry>
  
  <entry>
    <title>nginx | 转发 tcp 端口流量</title>
    <link href="http://benpaodewoniu.github.io/2024/06/24/nginx12/"/>
    <id>http://benpaodewoniu.github.io/2024/06/24/nginx12/</id>
    <published>2024-06-24T15:38:15.000Z</published>
    <updated>2024-06-24T16:02:00.957Z</updated>
    
    <content type="html"><![CDATA[<p>这里借助 <code>nginx</code> ，将 <code>tcp + socket</code> 请求发到一个代理服务器上，然后代理服务器再转发给目标服务器。</p><p>其中，<code>nginx</code> 是配置在代理服务器上的。</p><a id="more"></a><p>首先，我们要知道一些前提。</p><p>转发 <code>TCP</code> 端口是要配置在 <code>stream</code> 里面。</p><p><code>stream</code> 模块的配置需要特定的位置。常见的位置包括：</p><ul><li><code>/etc/nginx/nginx.conf</code> ：如果你的 <code>nginx.conf</code> 文件是单一的配置文件。</li><li><code>/etc/nginx/conf.d/</code> 目录下的一个单独配置文件，例如 <code>tcp_forward.conf</code> 。</li></ul><p>一个配置如下「下面只是简单配置」</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># /etc/nginx/nginx.conf</span></span><br><span class="line"></span><br><span class="line">user nginx;</span><br><span class="line">worker_processes auto;</span><br><span class="line">error_log /var/log/nginx/error.log;</span><br><span class="line"></span><br><span class="line"><span class="comment"># http模块配置</span></span><br><span class="line">http &#123;</span><br><span class="line">    <span class="built_in">..</span>.</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># stream模块配置</span></span><br><span class="line">stream &#123;</span><br><span class="line">   <span class="built_in"> server </span>&#123;</span><br><span class="line">        listen 17777;</span><br><span class="line">        proxy_pass 172.31.1.194:13000;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>这里说一下这个配置的点</p><ul><li>代理服务器开启 <code>17777</code>，然后转发到目标服务器 <code>13000</code> 端口</li><li><code>172.31.1.194</code> 是局域网 <code>IP</code>，需要保证两台服务器位于同一网段<ul><li><a href="/2024/06/24/aws5/">aws | 流量走内网</a></li></ul></li><li>目标服务器的安全组的 <code>13000</code> 端口的入流量规则，只接收来自代理服务器的流量，也填写局域网的 <code>IP</code></li></ul><p>咱们使用脚本验证。</p><p>首先，代理服务器配置好之后，必须重新启动 <code>nginx</code>。</p><p>目标服务器脚本。</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 服务端代码 server.py</span></span><br><span class="line">import socket</span><br><span class="line"></span><br><span class="line"><span class="comment"># 定义主机和端口</span></span><br><span class="line">HOST = <span class="string">'0.0.0.0'</span>  # 使用回环地址，也可以是服务器的公共<span class="built_in"> IP </span>地址</span><br><span class="line">PORT = 25535     # 端口号，可以自定义一个未被占用的端口号</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建 socket 对象</span></span><br><span class="line">server_socket = socket.socket(socket.AF_INET, socket.SOCK_STREAM)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 绑定主机和端口</span></span><br><span class="line">server_socket.bind((HOST, PORT))</span><br><span class="line"></span><br><span class="line"><span class="comment"># 开始监听，允许最多一个连接请求</span></span><br><span class="line">server_socket.listen(1)</span><br><span class="line"><span class="builtin-name">print</span>(f<span class="string">"Server is listening on &#123;HOST&#125;:&#123;PORT&#125;..."</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 等待客户端连接</span></span><br><span class="line">client_socket, client_address = server_socket.accept()</span><br><span class="line"><span class="builtin-name">print</span>(f<span class="string">"Connected by &#123;client_address&#125;"</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 接收数据并回显</span></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    data = client_socket.recv(1024)  # 接收数据，最多 1024 字节</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> data:</span><br><span class="line">        break</span><br><span class="line">    <span class="builtin-name">print</span>(f<span class="string">"Received from client: &#123;data.decode()&#125;"</span>)</span><br><span class="line">    client_socket.sendall(data)  # 将接收到的数据返回给客户端</span><br><span class="line"></span><br><span class="line"><span class="comment"># 关闭连接</span></span><br><span class="line">client_socket.close()</span><br><span class="line">server_socket.close()</span><br></pre></td></tr></table></figure><p>本地脚本</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 客户端代码 client.py</span></span><br><span class="line">import socket</span><br><span class="line"></span><br><span class="line"><span class="comment"># 定义服务端的主机和端口</span></span><br><span class="line">HOST = <span class="string">'代理服务器的域名或者 IP'</span>  # 使用回环地址，也可以是服务器的公共<span class="built_in"> IP </span>地址</span><br><span class="line">PORT = 17777        # 与服务端相同的端口号</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建 socket 对象</span></span><br><span class="line">client_socket = socket.socket(socket.AF_INET, socket.SOCK_STREAM)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 连接服务端</span></span><br><span class="line">client_socket.connect((HOST, PORT))</span><br><span class="line"><span class="builtin-name">print</span>(f<span class="string">"Connected to server at &#123;HOST&#125;:&#123;PORT&#125;"</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 发送数据</span></span><br><span class="line">message = <span class="string">"Hello, server!"</span></span><br><span class="line">client_socket.sendall(message.encode())</span><br><span class="line"></span><br><span class="line"><span class="comment"># 接收数据</span></span><br><span class="line">data = client_socket.recv(1024)  # 接收数据，最多 1024 字节</span><br><span class="line"><span class="builtin-name">print</span>(f<span class="string">"Received from server: &#123;data.decode()&#125;"</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 关闭连接</span></span><br><span class="line">client_socket.close()</span><br></pre></td></tr></table></figure><p>经过 <code>nginx</code> 代理后，对外面暴漏的 <code>IP</code> 只是代理服务器 <code>IP</code>。</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;这里借助 &lt;code&gt;nginx&lt;/code&gt; ，将 &lt;code&gt;tcp + socket&lt;/code&gt; 请求发到一个代理服务器上，然后代理服务器再转发给目标服务器。&lt;/p&gt;
&lt;p&gt;其中，&lt;code&gt;nginx&lt;/code&gt; 是配置在代理服务器上的。&lt;/p&gt;
    
    </summary>
    
      <category term="网站设计" scheme="http://benpaodewoniu.github.io/categories/%E7%BD%91%E7%AB%99%E8%AE%BE%E8%AE%A1/"/>
    
      <category term="服务端" scheme="http://benpaodewoniu.github.io/categories/%E7%BD%91%E7%AB%99%E8%AE%BE%E8%AE%A1/%E6%9C%8D%E5%8A%A1%E7%AB%AF/"/>
    
      <category term="nginx" scheme="http://benpaodewoniu.github.io/categories/%E7%BD%91%E7%AB%99%E8%AE%BE%E8%AE%A1/%E6%9C%8D%E5%8A%A1%E7%AB%AF/nginx/"/>
    
    
      <category term="tcp" scheme="http://benpaodewoniu.github.io/tags/tcp/"/>
    
  </entry>
  
  <entry>
    <title>cloudflare | CF 基本功能解析</title>
    <link href="http://benpaodewoniu.github.io/2024/06/24/cloudflare3/"/>
    <id>http://benpaodewoniu.github.io/2024/06/24/cloudflare3/</id>
    <published>2024-06-24T07:22:03.000Z</published>
    <updated>2024-06-24T07:23:41.662Z</updated>
    
    <summary type="html">
    
    </summary>
    
      <category term="网站设计" scheme="http://benpaodewoniu.github.io/categories/%E7%BD%91%E7%AB%99%E8%AE%BE%E8%AE%A1/"/>
    
      <category term="服务商" scheme="http://benpaodewoniu.github.io/categories/%E7%BD%91%E7%AB%99%E8%AE%BE%E8%AE%A1/%E6%9C%8D%E5%8A%A1%E5%95%86/"/>
    
      <category term="Cloudflare" scheme="http://benpaodewoniu.github.io/categories/%E7%BD%91%E7%AB%99%E8%AE%BE%E8%AE%A1/%E6%9C%8D%E5%8A%A1%E5%95%86/Cloudflare/"/>
    
    
      <category term="cloudflare" scheme="http://benpaodewoniu.github.io/tags/cloudflare/"/>
    
  </entry>
  
  <entry>
    <title>cloudflare | 代理非标端口</title>
    <link href="http://benpaodewoniu.github.io/2024/06/24/cloudflare2/"/>
    <id>http://benpaodewoniu.github.io/2024/06/24/cloudflare2/</id>
    <published>2024-06-24T01:19:44.000Z</published>
    <updated>2024-06-27T07:34:42.277Z</updated>
    
    <content type="html"><![CDATA[<p>免费版本的 <code>cloudflare</code> 走非 <code>80</code>、<code>443</code> 端口。</p><a id="more"></a><p>如果开启了小云朵的代理，那么</p><ul><li><p><code>http</code></p><ul><li><code>80、8080、8880、2052、2082、2086、2095</code></li></ul></li><li><p><code>https</code></p><ul><li><code>443、2053、2083、2087、2096、8443</code></li></ul></li><li><p><a href="https://developers.cloudflare.com/fundamentals/reference/network-ports/">network-ports</a></p></li></ul><p>意思是，如果你的域名是 <code>xxx.com</code>，并且开启了 <code>https</code> 的 <code>2053</code> 访问，那么，你可以用 <code>CF</code> 代理访问 <code>https://xxx.com:2053</code></p><p>但是，其他端口比如 <code>https://xxx.com:13000</code> 是不能访问的。</p><p><code>CF</code> 有一个机制，可以让你访问 <code>https://xxx.com</code> 最后流量走的确实服务器的非 <code>443</code> 端口，就是 <code>origin rule</code> 配置。</p><ul><li><a href="https://blog.sundaysto.club/archives/443duan-kou-bei-zhan-yong-cloudflareshi-xian-fei-biao-zhun-duan-kou-de-dai-li">443端口被占用，cloudflare实现非标准端口的代理，以实现域名不加端口号的访问</a></li></ul><p>那是否有方法代理 <code>https://xxx.com:13000</code>,或许有方法，但是目前我没找到。</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;免费版本的 &lt;code&gt;cloudflare&lt;/code&gt; 走非 &lt;code&gt;80&lt;/code&gt;、&lt;code&gt;443&lt;/code&gt; 端口。&lt;/p&gt;
    
    </summary>
    
      <category term="网站设计" scheme="http://benpaodewoniu.github.io/categories/%E7%BD%91%E7%AB%99%E8%AE%BE%E8%AE%A1/"/>
    
      <category term="服务商" scheme="http://benpaodewoniu.github.io/categories/%E7%BD%91%E7%AB%99%E8%AE%BE%E8%AE%A1/%E6%9C%8D%E5%8A%A1%E5%95%86/"/>
    
      <category term="Cloudflare" scheme="http://benpaodewoniu.github.io/categories/%E7%BD%91%E7%AB%99%E8%AE%BE%E8%AE%A1/%E6%9C%8D%E5%8A%A1%E5%95%86/Cloudflare/"/>
    
    
      <category term="cloudflare" scheme="http://benpaodewoniu.github.io/tags/cloudflare/"/>
    
  </entry>
  
  <entry>
    <title>cloudflare | CF 之后 TCP + socket 还能通信吗</title>
    <link href="http://benpaodewoniu.github.io/2024/06/24/cloudflare1/"/>
    <id>http://benpaodewoniu.github.io/2024/06/24/cloudflare1/</id>
    <published>2024-06-23T18:00:04.000Z</published>
    <updated>2024-06-24T16:05:54.315Z</updated>
    
    <content type="html"><![CDATA[<p>先说结论，如果是免费版本 <code>CF</code>，那么，<code>TCP + socket</code> 是不能代理通信的。</p><p>因为免费版本只是接管了 <code>http</code> 层，把 <code>TCP</code> 层给禁掉了。但是，注意上面的话，是代理不能通信。</p><a id="more"></a><p>这里说一下如何在 <code>CF</code> 接管域名的情况下，进行 <code>TCP + socket</code> 通信</p><ul><li><code>DNS</code> 直连</li><li>使用其他域名</li><li><code>CF</code> 付费功能，<a href="https://www.cloudflare.com/zh-cn/application-services/products/cloudflare-spectrum/">Cloudflare Spectrum</a></li></ul><p>先弄一下脚本吧，就是 <code>server</code> 跑一个 <code>tcp + socket</code> 的服务，然后本地进行连接，如果，有输出，就说明调用成功。</p><p>测试是使用 <code>15000</code> 端口，在使用前，需要打开安全组和防火墙。</p><h2 id="server-py"><a href="#server-py" class="headerlink" title="server.py"></a>server.py</h2><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">import socket</span><br><span class="line"></span><br><span class="line"><span class="comment"># 定义主机和端口</span></span><br><span class="line">HOST = <span class="string">'0.0.0.0'</span>  # 使用回环地址，也可以是服务器的公共<span class="built_in"> IP </span>地址</span><br><span class="line">PORT = 15000     # 端口号，可以自定义一个未被占用的端口号</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建 socket 对象</span></span><br><span class="line">server_socket = socket.socket(socket.AF_INET, socket.SOCK_STREAM)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 绑定主机和端口</span></span><br><span class="line">server_socket.bind((HOST, PORT))</span><br><span class="line"></span><br><span class="line"><span class="comment"># 开始监听，允许最多一个连接请求</span></span><br><span class="line">server_socket.listen(1)</span><br><span class="line"><span class="builtin-name">print</span>(f<span class="string">"Server is listening on &#123;HOST&#125;:&#123;PORT&#125;..."</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 等待客户端连接</span></span><br><span class="line">client_socket, client_address = server_socket.accept()</span><br><span class="line"><span class="builtin-name">print</span>(f<span class="string">"Connected by &#123;client_address&#125;"</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 接收数据并回显</span></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    data = client_socket.recv(1024)  # 接收数据，最多 1024 字节</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> data:</span><br><span class="line">        break</span><br><span class="line">    <span class="builtin-name">print</span>(f<span class="string">"Received from client: &#123;data.decode()&#125;"</span>)</span><br><span class="line">    client_socket.sendall(data)  # 将接收到的数据返回给客户端</span><br><span class="line"></span><br><span class="line"><span class="comment"># 关闭连接</span></span><br><span class="line">client_socket.close()</span><br><span class="line">server_socket.close()</span><br></pre></td></tr></table></figure><h2 id="client-py"><a href="#client-py" class="headerlink" title="client.py"></a>client.py</h2><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 客户端代码 client.py</span></span><br><span class="line">import socket</span><br><span class="line"></span><br><span class="line"><span class="comment"># 定义服务端的主机和端口</span></span><br><span class="line"><span class="comment"># HOST = '根域名'  # 使用回环地址，也可以是服务器的公共 IP 地址</span></span><br><span class="line"><span class="comment"># HOST = '子域名'  # 使用回环地址，也可以是服务器的公共 IP 地址</span></span><br><span class="line"><span class="comment"># HOST = 'ip'  # 使用回环地址，也可以是服务器的公共 IP 地址</span></span><br><span class="line">PORT = 15000        # 与服务端相同的端口号</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建 socket 对象</span></span><br><span class="line">client_socket = socket.socket(socket.AF_INET, socket.SOCK_STREAM)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 连接服务端</span></span><br><span class="line">client_socket.connect((HOST, PORT))</span><br><span class="line"><span class="builtin-name">print</span>(f<span class="string">"Connected to server at &#123;HOST&#125;:&#123;PORT&#125;"</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 发送数据</span></span><br><span class="line">message = <span class="string">"Hello, server!"</span></span><br><span class="line">client_socket.sendall(message.encode())</span><br><span class="line"></span><br><span class="line"><span class="comment"># 接收数据</span></span><br><span class="line">data = client_socket.recv(1024)  # 接收数据，最多 1024 字节</span><br><span class="line"><span class="builtin-name">print</span>(f<span class="string">"Received from server: &#123;data.decode()&#125;"</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 关闭连接</span></span><br><span class="line">client_socket.close()</span><br></pre></td></tr></table></figure><h2 id="DNS-直连"><a href="#DNS-直连" class="headerlink" title="DNS 直连"></a>DNS 直连</h2><p><img src="/images/cloudflare/1_0.png" alt=""></p><p>如果，子域名不走代理，而是走 <code>DNS</code> 直连，那么，<code>tcp + socket</code> 是可以连通的。</p><p>但是，别人可以进行抓包，抓到这个 <code>IP</code>，会导致 <code>CF</code> 防护形同虚设。</p><h2 id="其他域名"><a href="#其他域名" class="headerlink" title="其他域名"></a>其他域名</h2><p>就是将 <code>CF</code> 接管的域名放弃，不用来连接 <code>tcp</code> 层通信，重新买一个域名。</p><p>这个域名可以直连，也可以用反向代理。</p><h2 id="Spectrum"><a href="#Spectrum" class="headerlink" title="Spectrum"></a>Spectrum</h2><p>这个只有 <code>CF</code> 付费版本才会带有这个功能。</p><p>但是，很不幸，<code>CF</code> 有三种付费模式。</p><ul><li><code>Pro</code></li><li><code>Business</code></li><li><code>Enterprise</code></li></ul><p>其中只有 <code>Enterprise</code> 才具备任意 <code>TCP/UDP</code> 端口连接。而 <code>Pro</code> 只支持 <code>ssh</code> 的 <code>22</code> 和 我的世界的 <code>22535</code>，<code>Business</code> 只比 <code>Pro</code> 多了一个 <code>RDP</code>「远程桌面连接」。</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;先说结论，如果是免费版本 &lt;code&gt;CF&lt;/code&gt;，那么，&lt;code&gt;TCP + socket&lt;/code&gt; 是不能代理通信的。&lt;/p&gt;
&lt;p&gt;因为免费版本只是接管了 &lt;code&gt;http&lt;/code&gt; 层，把 &lt;code&gt;TCP&lt;/code&gt; 层给禁掉了。但是，注意上面的话，是代理不能通信。&lt;/p&gt;
    
    </summary>
    
      <category term="网站设计" scheme="http://benpaodewoniu.github.io/categories/%E7%BD%91%E7%AB%99%E8%AE%BE%E8%AE%A1/"/>
    
      <category term="服务商" scheme="http://benpaodewoniu.github.io/categories/%E7%BD%91%E7%AB%99%E8%AE%BE%E8%AE%A1/%E6%9C%8D%E5%8A%A1%E5%95%86/"/>
    
      <category term="Cloudflare" scheme="http://benpaodewoniu.github.io/categories/%E7%BD%91%E7%AB%99%E8%AE%BE%E8%AE%A1/%E6%9C%8D%E5%8A%A1%E5%95%86/Cloudflare/"/>
    
    
      <category term="cloudflare" scheme="http://benpaodewoniu.github.io/tags/cloudflare/"/>
    
  </entry>
  
  <entry>
    <title>cloudflare | CF 的简单应用</title>
    <link href="http://benpaodewoniu.github.io/2024/06/24/cloudflare0/"/>
    <id>http://benpaodewoniu.github.io/2024/06/24/cloudflare0/</id>
    <published>2024-06-23T18:00:01.000Z</published>
    <updated>2024-06-24T06:59:13.778Z</updated>
    
    <content type="html"><![CDATA[<p>这里简单的说一下 <code>CF</code> 的作用。</p><ul><li><a href="https://cloudflare.com/">cloudflare</a></li></ul><a id="more"></a><p>首先 <code>CF</code> 主营业务上是一个 <code>CDN</code>，而且是业内最强，性价比最高的 <code>CDN</code>，但是，它并不支持大陆的 <code>IP</code> 访问。（我实际用大陆 <code>IP</code> 访问也没问题）</p><p><code>CDN</code> 是多节点内容分发，处于这个功能它可以有效的抗 <code>DDOS</code>，并且，它的防御号称无流量上限，如果，你只是一个小网站主，用免费套餐即可。</p><p><code>CF</code> 定价也很便宜，有月付和年付的区别。</p><p>我这里说一下 <code>CF</code> 简单的原理，通常咱们访问一个域名，域名服务器会经过查询，查询到 <code>IP</code> 后，返回回来，然后访问。所以，<code>CF</code> 的原理就是，如果你想用 <code>CF</code> 的服务，需要把域名托管到 <code>CF</code> 的 <code>DNS</code> 服务器（很简单，只需要修改服务器就好了）。这个时候，如果，你访问域名，首先会进入 <code>CF</code> 的域名服务器，你可以在 <code>CF</code> 中设置一些规则，比如什么区域不能进、符合什么规则的流量才放行等等，当然也可以直接开启 <code>CF 5 秒盾</code>，进行最严格防御。如果流量通过 <code>CF</code> 中设置的规则后，假设你用的是 <code>DNS</code> 直连，那么，它后续和普通的 <code>DNS</code> 服务器没区别。</p><p>但是，<code>DNS</code> 直连式没有任何意义的，因为，直连的 <code>DNS</code> 会暴漏你的 <code>IP</code>，别人直接打你的 <code>IP</code>，就会绕过 <code>CF</code> 防护。</p><p>所以，一般来说，<code>CF</code> 的 <code>DNS</code> 都是代理。如果是代理的话，<code>CF</code> 的 <code>DNS</code> 服务器，会内部再用一个 <code>IP</code> 去请求你真 <code>IP</code> 的服务器，但是，对外反馈的是假的 <code>IP</code>，这就有效的保护了你的服务器的 <code>IP</code>。</p><p>换句话说，一旦，你的服务器的 <code>IP</code> 被人知道，那么，<code>CF</code> 的防护一点用处都没有。</p><p>另外，说一下 <code>CF</code> 的几个重点要知道的事情</p><ul><li><code>CF</code> 的方式，是全托管，你的子域名、根域名全部都在 <code>CF</code> 下面，因为，你是将域名服务器给修改了。对比 <code>AWS</code> 的 <code>cloudfront</code>，它只用子域名就好了，不需要全部托管</li><li><code>CF</code> 的免费版本只能用在 <code>http/https</code> 这一层。如果你使用 <code>CF</code> 的免费版本，如果，你的域名下面的服务器，有 <code>TCP + socket</code> 通信，那么是不能用的，这么说，也不全面，详情请看<ul><li><a href="/2024/06/24/cloudflare1/">cloudflare | CF 之后 TCP + socket 还能通信吗</a></li></ul></li><li><code>CF</code> 默认只能代理几个标准端口，如 <code>80</code>、<code>443</code>，如果是其他端口，请看<ul><li><a href="/2024/06/24/cloudflare2/">cloudflare | 代理非标端口</a></li></ul></li></ul><p>这里简单的说一下整个过程（注意我并不会手把手地说，而是说一下某一步骤的注意事项，具体步骤在网上已经非常详细了）</p><ul><li>创建网站</li><li>贴上域名，下一步（套餐选择 <code>free</code> 即可）<ul><li>如果你之前域名有解析，那么，<code>CF</code> 自动会把相关的字段复制过来</li></ul></li><li>域名更换 <code>CF</code> 的 <code>DNS</code> 服务器<ul><li>很简单，每个域名服务商平台都具备这个功能，上网搜一下就好了</li></ul></li><li>替换完成后，点击让 <code>CF</code> 检查域名服务器<ul><li>通过后会有邮件通知你</li></ul></li></ul><p>上面其实就已经结束了。</p><p>以后再添加相关的域名解析是直接在 <code>CF</code> 上添加的。</p><p><img src="/images/cloudflare/0_0.png" alt=""></p><p>这里说一下我的经历。</p><p>我是使用 <a href="/2024/03/08/wordpress10/">letsencrypt</a> 做的证书，在没用 <code>CF</code> 的时候，我就可以进行 <code>https</code> 访问。</p><p>然后经历过上面的步骤后，我在 <code>SSL/TLS</code> 中选择了严格模式</p><p><img src="/images/cloudflare/0_1.png" alt=""></p><p>这并没有什么问题。</p><p>但是，我有一个纯净域名，使用 <code>CF</code> 提供的证书，一直不能用 <code>https</code> 访问，非常奇怪。。。</p><p><img src="/images/cloudflare/0_2.png" alt=""></p><p>如果，你不会编写 <code>CF</code> 的规则，你可以直接启动 <code>5 秒盾</code>。</p><p><img src="/images/cloudflare/0_3.png" alt=""></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;这里简单的说一下 &lt;code&gt;CF&lt;/code&gt; 的作用。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://cloudflare.com/&quot;&gt;cloudflare&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
    
    </summary>
    
      <category term="网站设计" scheme="http://benpaodewoniu.github.io/categories/%E7%BD%91%E7%AB%99%E8%AE%BE%E8%AE%A1/"/>
    
      <category term="服务商" scheme="http://benpaodewoniu.github.io/categories/%E7%BD%91%E7%AB%99%E8%AE%BE%E8%AE%A1/%E6%9C%8D%E5%8A%A1%E5%95%86/"/>
    
      <category term="Cloudflare" scheme="http://benpaodewoniu.github.io/categories/%E7%BD%91%E7%AB%99%E8%AE%BE%E8%AE%A1/%E6%9C%8D%E5%8A%A1%E5%95%86/Cloudflare/"/>
    
    
      <category term="cloudflare" scheme="http://benpaodewoniu.github.io/tags/cloudflare/"/>
    
  </entry>
  
  <entry>
    <title>centos | ssh 更改端口</title>
    <link href="http://benpaodewoniu.github.io/2024/06/22/centos1/"/>
    <id>http://benpaodewoniu.github.io/2024/06/22/centos1/</id>
    <published>2024-06-21T16:26:15.000Z</published>
    <updated>2024-06-21T16:37:38.144Z</updated>
    
    <content type="html"><![CDATA[<p><code>centos</code> 的 <code>ssh</code> 默认是 <code>22</code>。</p><a id="more"></a><h2 id="更改-ssh-端口"><a href="#更改-ssh-端口" class="headerlink" title="更改 ssh 端口"></a>更改 ssh 端口</h2><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo vi <span class="regexp">/etc/</span>ssh<span class="regexp">/sshd_config</span></span><br></pre></td></tr></table></figure><p>将 <code>Port</code> 修改成你想要的端口号，这里建议保留一下 <code>22</code>，防止出错，连不上服务器。</p><h2 id="重启-ssh"><a href="#重启-ssh" class="headerlink" title="重启 ssh"></a>重启 ssh</h2><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">sudo</span> <span class="selector-tag">systemctl</span> <span class="selector-tag">restart</span> <span class="selector-tag">sshd</span><span class="selector-class">.service</span></span><br></pre></td></tr></table></figure><p>如果你执行这一步的时候出现 <code>Job for sshd.service failed because the control process exited with error</code>，说明 <code>SELinux</code> 允许的 <code>ssh</code> 端口和你配置的不一致，所以，你需要自己在 <code>SELinux</code> 中注册一下。</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo semanage<span class="built_in"> port </span>-a -t ssh_port_t -p tcp 11234</span><br></pre></td></tr></table></figure><p>这里添加一下你要用的端口，然后重新启动 <code>ssh</code> 服务。</p><p>这里要注意的是，如果你启动了防火墙千万在断开链接之前，先开启这个端口的防火墙，否则将会连接不上。</p><ul><li><a href="/2024/06/22/centos0/">centos | 防火墙开启和用法</a></li></ul><p>如果你不幸没开防火墙，导致连不上，请参考</p><ul><li><a href="/2024/03/29/aws4/">aws | 修改 SSH 端口忘记打开防火墙</a></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;code&gt;centos&lt;/code&gt; 的 &lt;code&gt;ssh&lt;/code&gt; 默认是 &lt;code&gt;22&lt;/code&gt;。&lt;/p&gt;
    
    </summary>
    
      <category term="linux" scheme="http://benpaodewoniu.github.io/categories/linux/"/>
    
      <category term="centos" scheme="http://benpaodewoniu.github.io/categories/linux/centos/"/>
    
    
      <category term="centos" scheme="http://benpaodewoniu.github.io/tags/centos/"/>
    
  </entry>
  
  <entry>
    <title>centos | 防火墙开启和用法</title>
    <link href="http://benpaodewoniu.github.io/2024/06/22/centos0/"/>
    <id>http://benpaodewoniu.github.io/2024/06/22/centos0/</id>
    <published>2024-06-21T16:26:13.000Z</published>
    <updated>2024-06-21T16:41:55.281Z</updated>
    
    <content type="html"><![CDATA[<p>防火墙相关。</p><a id="more"></a><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">sudo yum install firewalld <span class="comment"># 安装防火墙</span></span><br><span class="line">sudo systemctl start firewalld <span class="comment"># 开启防火墙</span></span><br><span class="line">sudo systemctl stop firewalld <span class="comment"># 关闭防火墙</span></span><br><span class="line">sudo firewall-<span class="keyword">cmd</span><span class="bash"> --reload <span class="comment"># 重启防火墙，修改配置后要进行这个命令</span></span></span><br><span class="line">sudo firewall-<span class="keyword">cmd</span><span class="bash"> --state <span class="comment"># 查看状态</span></span></span><br><span class="line">sudo firewall-<span class="keyword">cmd</span><span class="bash"> --query-port=80/tcp <span class="comment"># 查看相关端口</span></span></span><br><span class="line">sudo firewall-<span class="keyword">cmd</span><span class="bash"> --permanent --list-ports <span class="comment"># 查看所有的开放端口</span></span></span><br><span class="line">sudo firewall-<span class="keyword">cmd</span><span class="bash"> --permanent --add-port=8080/tcp <span class="comment"># 开启端口</span></span></span><br><span class="line">sudo firewall-<span class="keyword">cmd</span><span class="bash"> --permanent --add-port=8083-8085/tcp <span class="comment"># 开启某一系列端口</span></span></span><br><span class="line">sudo firewall-<span class="keyword">cmd</span><span class="bash"> --permanent --remove-port=8083-8085/tcp <span class="comment"># 移除端口</span></span></span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;防火墙相关。&lt;/p&gt;
    
    </summary>
    
      <category term="linux" scheme="http://benpaodewoniu.github.io/categories/linux/"/>
    
      <category term="centos" scheme="http://benpaodewoniu.github.io/categories/linux/centos/"/>
    
    
      <category term="centos" scheme="http://benpaodewoniu.github.io/tags/centos/"/>
    
  </entry>
  
  <entry>
    <title>python | 用户相关</title>
    <link href="http://benpaodewoniu.github.io/2024/06/18/python207/"/>
    <id>http://benpaodewoniu.github.io/2024/06/18/python207/</id>
    <published>2024-06-18T15:43:34.000Z</published>
    <updated>2024-06-18T15:43:59.088Z</updated>
    
    <summary type="html">
    
    </summary>
    
      <category term="python" scheme="http://benpaodewoniu.github.io/categories/python/"/>
    
      <category term="模块" scheme="http://benpaodewoniu.github.io/categories/python/%E6%A8%A1%E5%9D%97/"/>
    
      <category term="selenium" scheme="http://benpaodewoniu.github.io/categories/python/%E6%A8%A1%E5%9D%97/selenium/"/>
    
    
      <category term="python" scheme="http://benpaodewoniu.github.io/tags/python/"/>
    
  </entry>
  
  <entry>
    <title>ok | ok api 平台对接</title>
    <link href="http://benpaodewoniu.github.io/2024/06/18/ok1/"/>
    <id>http://benpaodewoniu.github.io/2024/06/18/ok1/</id>
    <published>2024-06-17T16:01:07.000Z</published>
    <updated>2024-06-17T16:25:01.609Z</updated>
    
    <content type="html"><![CDATA[<p><code>ok api</code> 其实分为两种</p><ul><li><code>oklink</code><ul><li><a href="/2024/03/21/ok0/">oklink</a></li></ul></li><li><code>okapi</code><ul><li>这篇文章主要说这个</li><li>这里的 api 指的是平台 api，但是，平台 api 又分为两种</li><li><a href="https://www.okx.com/docs-v5/zh/#public-data">cex</a></li><li><a href="https://www.okx.com/zh-hans/web3/build/docs/home/welcome">链上</a></li></ul></li></ul><a id="more"></a><p>这里主要贴一下 <code>okpi</code> 的认证。</p><p>这里主要是抓取了 <code>ok</code> 平台的链上挂单。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> base64</span><br><span class="line"><span class="keyword">import</span> hmac</span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line"><span class="keyword">import</span> urllib.parse</span><br><span class="line"><span class="keyword">from</span> datetime <span class="keyword">import</span> datetime, timezone</span><br><span class="line"><span class="keyword">from</span> typing <span class="keyword">import</span> Dict</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">OkApiService</span>:</span></span><br><span class="line">    key = <span class="string">''</span></span><br><span class="line">    secret = <span class="string">""</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">pre_hash</span><span class="params">(self, timestamp, method, request_path, params=None)</span>:</span></span><br><span class="line">        <span class="comment"># 根据字符串和参数创建预签名</span></span><br><span class="line">        query_string = <span class="string">''</span></span><br><span class="line">        <span class="keyword">if</span> method == <span class="string">'GET'</span> <span class="keyword">and</span> params:</span><br><span class="line">            query_string = <span class="string">'?'</span> + urllib.parse.urlencode(params).replace(<span class="string">"%2520"</span>, <span class="string">"%20"</span>)</span><br><span class="line">        <span class="keyword">if</span> method == <span class="string">'POST'</span> <span class="keyword">and</span> params:</span><br><span class="line">            query_string = json.dumps(params)</span><br><span class="line">        <span class="keyword">return</span> <span class="string">f"<span class="subst">&#123;timestamp&#125;</span><span class="subst">&#123;method&#125;</span><span class="subst">&#123;request_path&#125;</span><span class="subst">&#123;query_string&#125;</span>"</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">create_signature</span><span class="params">(self, method, request_path, params=None)</span>:</span></span><br><span class="line">        <span class="comment"># 获取 ISO 8601 格式时间戳</span></span><br><span class="line">        timestamp = datetime.now(timezone.utc).isoformat()[:<span class="number">-9</span>] + <span class="string">'Z'</span></span><br><span class="line">        <span class="comment"># 生成签名</span></span><br><span class="line">        message = self.pre_hash(timestamp, method, request_path, params)</span><br><span class="line">        signature = hmac.new(bytes(self.secret, encoding=<span class="string">'utf8'</span>), bytes(message, encoding=<span class="string">'utf-8'</span>), digestmod=<span class="string">'sha256'</span>)</span><br><span class="line">        signature = base64.b64encode(signature.digest())</span><br><span class="line">        <span class="keyword">return</span> signature, timestamp</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get_market_list</span><span class="params">(self, token_info: Dict)</span> -&gt; <span class="keyword">None</span>:</span></span><br><span class="line"></span><br><span class="line">        url = <span class="string">f"https://www.okx.com/api/v5/mktplace/nft/markets/listings?chain=<span class="subst">&#123;token_info.get(<span class="string">'chain'</span>)&#125;</span>&amp;collectionAddress=<span class="subst">&#123;token_info.get(<span class="string">'collectionAddress'</span>)&#125;</span>&amp;limit=<span class="subst">&#123;<span class="number">100</span>&#125;</span>&amp;sort=price_asc"</span></span><br><span class="line"></span><br><span class="line">        params = &#123;</span><br><span class="line">            <span class="string">"chain"</span>: token_info.get(<span class="string">'chain'</span>),</span><br><span class="line">            <span class="string">"collectionAddress"</span>: token_info.get(<span class="string">'collectionAddress'</span>),</span><br><span class="line">            <span class="string">"limit"</span>: <span class="number">100</span>,</span><br><span class="line">            <span class="string">"sort"</span>: <span class="string">"price_asc"</span></span><br><span class="line">        &#125;</span><br><span class="line">        signature, timestamp = self.create_signature(<span class="string">"GET"</span>, <span class="string">"/api/v5/mktplace/nft/markets/listings"</span>, params)</span><br><span class="line">        headers = &#123;</span><br><span class="line">            <span class="string">"Content-Type"</span>: <span class="string">'application/json'</span>,</span><br><span class="line">            <span class="string">'OK-ACCESS-KEY'</span>: self.key,</span><br><span class="line">            <span class="string">'OK-ACCESS-SIGN'</span>: signature,</span><br><span class="line">            <span class="string">'OK-ACCESS-TIMESTAMP'</span>: timestamp,</span><br><span class="line">            <span class="string">'OK-ACCESS-PASSPHRASE'</span>: <span class="string">''</span>,</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        response = requests.request(<span class="string">"GET"</span>, url, headers=headers)</span><br><span class="line">        print(len(response.json().get(<span class="string">"data"</span>).get(<span class="string">"data"</span>)))</span><br><span class="line">        <span class="keyword">for</span> d <span class="keyword">in</span> response.json().get(<span class="string">"data"</span>).get(<span class="string">"data"</span>):</span><br><span class="line">            print(<span class="string">f"<span class="subst">&#123;d.get(<span class="string">'tokenId'</span>)&#125;</span>"</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    params = &#123;</span><br><span class="line">        <span class="string">"chain"</span>: <span class="string">"Lumi%20Layer3"</span>,</span><br><span class="line">        <span class="string">"collectionAddress"</span>: <span class="string">"0x3fa10a9d43113687f2fd143fca7445d8ef8e334a"</span></span><br><span class="line">    &#125;</span><br><span class="line">    OkApiService().get_market_list(params)</span><br><span class="line">    <span class="comment">#</span></span><br><span class="line">    params = &#123;</span><br><span class="line">        <span class="string">"chain"</span>: <span class="string">"eth"</span>,</span><br><span class="line">        <span class="string">"collectionAddress"</span>: <span class="string">"0xbc4ca0eda7647a8ab7c2061c2e118a18a936f13d"</span></span><br><span class="line">    &#125;</span><br><span class="line">    OkApiService().get_market_list(params)</span><br></pre></td></tr></table></figure><p>这里面有几个点要注意</p><ul><li><code>lumi</code> 的网络本来是<ul><li><code>Lumi Layer3</code>，中间有个空格，但是，空格可以用<code>%20</code>代替</li><li>但是 <code>%20</code> 会被 <code>urllib.parse.urlencode</code> 变成 <code>%2520</code>，所以，加了一个 <code>replace(&quot;%2520&quot;, &quot;%20&quot;)</code></li><li>这个地方可以再优化</li></ul></li><li>尽管 <code>OK</code> 平台的公开信息并不支持 <code>Lumi Layer3</code>，但是尝试后发现可以</li></ul><p><img src="/images/ok/1_1.png" alt=""></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;code&gt;ok api&lt;/code&gt; 其实分为两种&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;oklink&lt;/code&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;/2024/03/21/ok0/&quot;&gt;oklink&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;code&gt;okapi&lt;/code&gt;&lt;ul&gt;
&lt;li&gt;这篇文章主要说这个&lt;/li&gt;
&lt;li&gt;这里的 api 指的是平台 api，但是，平台 api 又分为两种&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.okx.com/docs-v5/zh/#public-data&quot;&gt;cex&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.okx.com/zh-hans/web3/build/docs/home/welcome&quot;&gt;链上&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
    
    </summary>
    
      <category term="项目经历" scheme="http://benpaodewoniu.github.io/categories/%E9%A1%B9%E7%9B%AE%E7%BB%8F%E5%8E%86/"/>
    
      <category term="大型" scheme="http://benpaodewoniu.github.io/categories/%E9%A1%B9%E7%9B%AE%E7%BB%8F%E5%8E%86/%E5%A4%A7%E5%9E%8B/"/>
    
      <category term="quantify" scheme="http://benpaodewoniu.github.io/categories/%E9%A1%B9%E7%9B%AE%E7%BB%8F%E5%8E%86/%E5%A4%A7%E5%9E%8B/quantify/"/>
    
      <category term="gateway" scheme="http://benpaodewoniu.github.io/categories/%E9%A1%B9%E7%9B%AE%E7%BB%8F%E5%8E%86/%E5%A4%A7%E5%9E%8B/quantify/gateway/"/>
    
      <category term="ok" scheme="http://benpaodewoniu.github.io/categories/%E9%A1%B9%E7%9B%AE%E7%BB%8F%E5%8E%86/%E5%A4%A7%E5%9E%8B/quantify/gateway/ok/"/>
    
      <category term="okapi" scheme="http://benpaodewoniu.github.io/categories/%E9%A1%B9%E7%9B%AE%E7%BB%8F%E5%8E%86/%E5%A4%A7%E5%9E%8B/quantify/gateway/ok/okapi/"/>
    
    
      <category term="okapi" scheme="http://benpaodewoniu.github.io/tags/okapi/"/>
    
  </entry>
  
  <entry>
    <title>python | 多进程间的通信，复杂场景</title>
    <link href="http://benpaodewoniu.github.io/2024/06/18/python206/"/>
    <id>http://benpaodewoniu.github.io/2024/06/18/python206/</id>
    <published>2024-06-17T16:00:41.000Z</published>
    <updated>2024-06-17T16:58:10.470Z</updated>
    
    <content type="html"><![CDATA[<p>我们经常会有以下的场景需要处理</p><ul><li>一个进程接数据，另外一个进程怎么收数据</li><li>怎么让多个进程共用一个日志模块</li></ul><a id="more"></a><p>一个例子。</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line">import multiprocessing</span><br><span class="line">import multiprocessing as mp</span><br><span class="line">import time</span><br><span class="line"><span class="keyword">from</span> multiprocessing import Manager</span><br><span class="line"><span class="keyword">from</span> multiprocessing.managers import BaseManager</span><br><span class="line"><span class="keyword">from</span> multiprocessing.queues import Queue</span><br><span class="line"><span class="keyword">from</span> typing import Dict</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">class Logger:</span><br><span class="line"></span><br><span class="line">    def __init__(self):</span><br><span class="line">        <span class="builtin-name">print</span>(<span class="string">"logger 初始化"</span>)</span><br><span class="line"></span><br><span class="line">    def <span class="builtin-name">info</span>(self, process, data):</span><br><span class="line">        <span class="builtin-name">print</span>(f<span class="string">"&#123;process&#125; 日志输出: &#123;data&#125;"</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">class Engine:</span><br><span class="line"></span><br><span class="line">    def start(self):</span><br><span class="line">       <span class="built_in"> queue </span>= mp.Queue()</span><br><span class="line">        dict_memory = Manager().dict()</span><br><span class="line">        bm = BaseManager()</span><br><span class="line">        bm.register(<span class="string">"Logger"</span>, Logger)</span><br><span class="line">        bm.start()</span><br><span class="line">        logger = bm.Logger()</span><br><span class="line"></span><br><span class="line">        asserts = &#123;</span><br><span class="line">            <span class="string">"logger"</span>: logger,</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        logger.<span class="builtin-name">info</span>(multiprocessing.current_process().name, <span class="string">"test"</span>)</span><br><span class="line"></span><br><span class="line">        p1 = mp.Process(<span class="attribute">target</span>=self.input, args=(queue, dict_memory, asserts), <span class="attribute">name</span>=<span class="string">"监控"</span>)</span><br><span class="line">        p2 = mp.Process(<span class="attribute">target</span>=self.output, args=(queue, dict_memory, asserts), <span class="attribute">name</span>=<span class="string">"web"</span>)</span><br><span class="line">        p3 = mp.Process(<span class="attribute">target</span>=self.active_start, args=(dict_memory, asserts), <span class="attribute">name</span>=<span class="string">"保活"</span>)</span><br><span class="line"></span><br><span class="line">        p1.start()</span><br><span class="line">        p2.start()</span><br><span class="line">        p3.start()</span><br><span class="line"></span><br><span class="line">        p1.join()</span><br><span class="line">        p2.join()</span><br><span class="line">        p3.join()</span><br><span class="line"></span><br><span class="line">    def input(self, queue: Queue, dict_memory: Dict, asserts: Dict):</span><br><span class="line">        logger = asserts.<span class="builtin-name">get</span>(<span class="string">"logger"</span>)</span><br><span class="line">        i = 0</span><br><span class="line">        <span class="keyword">while</span> 1:</span><br><span class="line">            queue.put(f<span class="string">"数据 &#123;i&#125;"</span>)</span><br><span class="line">            logger.<span class="builtin-name">info</span>(multiprocessing.current_process().name, f<span class="string">"队列入 &#123;i&#125;"</span>)</span><br><span class="line"></span><br><span class="line">            dict_memory[i] = i</span><br><span class="line">            logger.<span class="builtin-name">info</span>(multiprocessing.current_process().name, f<span class="string">"共用字典入 &#123;i&#125;"</span>)</span><br><span class="line"></span><br><span class="line">            time.sleep(3)</span><br><span class="line"></span><br><span class="line">            i += 1</span><br><span class="line"></span><br><span class="line">    def output(self, queue: Queue, dict_memory: Dict, asserts: Dict):</span><br><span class="line">        logger = asserts.<span class="builtin-name">get</span>(<span class="string">"logger"</span>)</span><br><span class="line">        <span class="keyword">while</span> 1:</span><br><span class="line">            data = queue.<span class="builtin-name">get</span>()</span><br><span class="line">            logger.<span class="builtin-name">info</span>(multiprocessing.current_process().name, f<span class="string">"队列出 &#123;data&#125;"</span>)</span><br><span class="line">            time.sleep(1)</span><br><span class="line"></span><br><span class="line">    def active_start(self, dict_memory: Dict, asserts: Dict):</span><br><span class="line">        logger = asserts.<span class="builtin-name">get</span>(<span class="string">"logger"</span>)</span><br><span class="line">        <span class="keyword">while</span> 1:</span><br><span class="line">            logger.<span class="builtin-name">info</span>(multiprocessing.current_process().name, f<span class="string">"字典长度为 &#123;len(dict_memory)&#125;"</span>)</span><br><span class="line">            time.sleep(4)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    Engine().start()</span><br></pre></td></tr></table></figure><p>输出</p><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">logger 初始化</span><br><span class="line">MainProcess 日志输出: test</span><br><span class="line">监控 日志输出: 队列入 <span class="number">0</span></span><br><span class="line">web 日志输出: 队列出 数据 <span class="number">0</span></span><br><span class="line">监控 日志输出: 共用字典入 <span class="number">0</span></span><br><span class="line">保活 日志输出: 字典长度为 <span class="number">0</span></span><br><span class="line">监控 日志输出: 队列入 <span class="number">1</span></span><br><span class="line">web 日志输出: 队列出 数据 <span class="number">1</span></span><br><span class="line">...</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;我们经常会有以下的场景需要处理&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;一个进程接数据，另外一个进程怎么收数据&lt;/li&gt;
&lt;li&gt;怎么让多个进程共用一个日志模块&lt;/li&gt;
&lt;/ul&gt;
    
    </summary>
    
      <category term="python" scheme="http://benpaodewoniu.github.io/categories/python/"/>
    
      <category term="进阶" scheme="http://benpaodewoniu.github.io/categories/python/%E8%BF%9B%E9%98%B6/"/>
    
      <category term="多进程 &amp; 多线程" scheme="http://benpaodewoniu.github.io/categories/python/%E8%BF%9B%E9%98%B6/%E5%A4%9A%E8%BF%9B%E7%A8%8B-%E5%A4%9A%E7%BA%BF%E7%A8%8B/"/>
    
      <category term="多进程" scheme="http://benpaodewoniu.github.io/categories/python/%E8%BF%9B%E9%98%B6/%E5%A4%9A%E8%BF%9B%E7%A8%8B-%E5%A4%9A%E7%BA%BF%E7%A8%8B/%E5%A4%9A%E8%BF%9B%E7%A8%8B/"/>
    
      <category term="通信" scheme="http://benpaodewoniu.github.io/categories/python/%E8%BF%9B%E9%98%B6/%E5%A4%9A%E8%BF%9B%E7%A8%8B-%E5%A4%9A%E7%BA%BF%E7%A8%8B/%E5%A4%9A%E8%BF%9B%E7%A8%8B/%E9%80%9A%E4%BF%A1/"/>
    
    
      <category term="multiprocess" scheme="http://benpaodewoniu.github.io/tags/multiprocess/"/>
    
      <category term="多进程" scheme="http://benpaodewoniu.github.io/tags/%E5%A4%9A%E8%BF%9B%E7%A8%8B/"/>
    
  </entry>
  
  <entry>
    <title>python | 进城池和多进程应该如何选择</title>
    <link href="http://benpaodewoniu.github.io/2024/06/18/python205/"/>
    <id>http://benpaodewoniu.github.io/2024/06/18/python205/</id>
    <published>2024-06-17T16:00:38.000Z</published>
    <updated>2024-06-17T17:00:30.366Z</updated>
    
    <content type="html"><![CDATA[<p>这里主要讨论进程。</p><a id="more"></a><p>其实很简单，进程池中的进程是使用过之后，将空闲进程放回池子中，等待下一次使用，减少了创建的开销。</p><p>多进程应该运行长时间的程序采用。</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;这里主要讨论进程。&lt;/p&gt;
    
    </summary>
    
      <category term="python" scheme="http://benpaodewoniu.github.io/categories/python/"/>
    
      <category term="进阶" scheme="http://benpaodewoniu.github.io/categories/python/%E8%BF%9B%E9%98%B6/"/>
    
      <category term="多进程 &amp; 多线程" scheme="http://benpaodewoniu.github.io/categories/python/%E8%BF%9B%E9%98%B6/%E5%A4%9A%E8%BF%9B%E7%A8%8B-%E5%A4%9A%E7%BA%BF%E7%A8%8B/"/>
    
      <category term="多进程" scheme="http://benpaodewoniu.github.io/categories/python/%E8%BF%9B%E9%98%B6/%E5%A4%9A%E8%BF%9B%E7%A8%8B-%E5%A4%9A%E7%BA%BF%E7%A8%8B/%E5%A4%9A%E8%BF%9B%E7%A8%8B/"/>
    
      <category term="进程池" scheme="http://benpaodewoniu.github.io/categories/python/%E8%BF%9B%E9%98%B6/%E5%A4%9A%E8%BF%9B%E7%A8%8B-%E5%A4%9A%E7%BA%BF%E7%A8%8B/%E8%BF%9B%E7%A8%8B%E6%B1%A0/"/>
    
      <category term="进阶" scheme="http://benpaodewoniu.github.io/categories/python/%E8%BF%9B%E9%98%B6/%E5%A4%9A%E8%BF%9B%E7%A8%8B-%E5%A4%9A%E7%BA%BF%E7%A8%8B/%E8%BF%9B%E7%A8%8B%E6%B1%A0/%E8%BF%9B%E9%98%B6/"/>
    
      <category term="进阶" scheme="http://benpaodewoniu.github.io/categories/python/%E8%BF%9B%E9%98%B6/%E5%A4%9A%E8%BF%9B%E7%A8%8B-%E5%A4%9A%E7%BA%BF%E7%A8%8B/%E5%A4%9A%E8%BF%9B%E7%A8%8B/%E8%BF%9B%E9%98%B6/"/>
    
    
      <category term="multiprocess" scheme="http://benpaodewoniu.github.io/tags/multiprocess/"/>
    
      <category term="多进程" scheme="http://benpaodewoniu.github.io/tags/%E5%A4%9A%E8%BF%9B%E7%A8%8B/"/>
    
  </entry>
  
  <entry>
    <title>nanon | nanon</title>
    <link href="http://benpaodewoniu.github.io/2024/06/13/nanon0/"/>
    <id>http://benpaodewoniu.github.io/2024/06/13/nanon0/</id>
    <published>2024-06-13T14:52:07.000Z</published>
    <updated>2024-06-17T17:03:03.458Z</updated>
    
    <content type="html"><![CDATA[<div id="hexo-blog-encrypt" data-wpm="Oh, this is an invalid password. Check and try again, please." data-whm="OOPS, these decrypted content may changed, but you can still have a look.">  <div class="hbe-input-container">  <input type="password" id="hbePass" placeholder="" />    <label for="hbePass">密码等级 0 ！！！</label>    <div class="bottom-line"></div>  </div>  <script id="hbeData" type="hbeData" data-hmacdigest="fa24ac124b6b3b40b5beb9f11c0c1035687199f252426b406deba9ae1aa7e8b3">41b44efef159e4bb68479506e1793802e828c2a1dfa34ed2f774bba7436fa63919fbc5bd99088ad42ce18d6aee1e94a9e9006f860bee9e84d344f1d3ff89ffd40a528d13b2d32a43b72cb41b52dea46d952a50b6eefd1495e7774429b5e2a8026fb6b94256113431b47a7c3ade9684035057a8df65865748f1a6a51845e28b862c07dbf977e8d6854b1af122da153ce3335bf43c64e1d2e025b2515b4810d2eba4eb38b6ee4cdb738a74908d845092772bc733d1c7b8353e123318877bffff6097bc3a84ae41d224c520c914061cae1d103bc2ca4da1af29570cbba0d6305870cb0f01a3865d197524bf320f1f2be6850879be936dd453f6e1c6d4a1af9540e872196f60124e6fbd5525a55f206b303774fd7960b989529056f16134683d9f8370ea2a8724de95439d650b67d015756c0c31a3ff5428f4ee8b318a5884ee145e65c5ac6c79e0331c57ea17bed0a493d6185d71eb1fabc41d4301a61feb3357abffe9254b5285ae2b4f805880832fd7220b776d4f74d6f3653f2ab9513cbb24c21a45d78710af203b5d007029efb06f2e7c8c0f3b8d562e0974c6c8c754922bb157d468c8b6819c7f1c3aa898d6c113d4</script></div><script src="/lib/blog-encrypt.js"></script><link href="/css/blog-encrypt.css" rel="stylesheet" type="text/css">]]></content>
    
    <summary type="html">
    
      密码等级 0
    
    </summary>
    
      <category term="区块链" scheme="http://benpaodewoniu.github.io/categories/%E5%8C%BA%E5%9D%97%E9%93%BE/"/>
    
      <category term="dapp" scheme="http://benpaodewoniu.github.io/categories/%E5%8C%BA%E5%9D%97%E9%93%BE/dapp/"/>
    
      <category term="2b" scheme="http://benpaodewoniu.github.io/categories/%E5%8C%BA%E5%9D%97%E9%93%BE/dapp/2b/"/>
    
    
      <category term="2b" scheme="http://benpaodewoniu.github.io/tags/2b/"/>
    
  </entry>
  
  <entry>
    <title>thlm | 采集监控</title>
    <link href="http://benpaodewoniu.github.io/2024/06/10/thlm3/"/>
    <id>http://benpaodewoniu.github.io/2024/06/10/thlm3/</id>
    <published>2024-06-10T03:33:48.000Z</published>
    <updated>2024-06-10T07:32:09.258Z</updated>
    
    <content type="html"><![CDATA[<div id="hexo-blog-encrypt" data-wpm="Oh, this is an invalid password. Check and try again, please." data-whm="OOPS, these decrypted content may changed, but you can still have a look.">  <div class="hbe-input-container">  <input type="password" id="hbePass" placeholder="" />    <label for="hbePass">密码等级 0 ！！！</label>    <div class="bottom-line"></div>  </div>  <script id="hbeData" type="hbeData" data-hmacdigest="b4bd258a0e8a4dcbeb7af8a81edd97aebec4bb27f8f1b650dde385d305f87f15">e4cb732258385c68465c924c5f640eceb75cc64f0d4e021462ef5ca2dad0d60d8b80f4a2b198538efe9527240ef9dc27fd53575353756716728e984df0b8e4629416aab7361f91aeec15e552021138c0d5df2cafaa3548dec379a442f51a4fa014b50a6cedeff52b4a70575c8dfaf2c104ac0fa9f1bd2a57234cd953f11875fa8d89098621aa812f8c35b15e455df873b706f39b72a04a0dd31d88f0af337d0bc124238147f2b4d742019a6e2af565d23f986ba12a55debea0fa66da191757255d96ed1739f22a86abdee2ec0ecf6702f4d70d8d14a06a56e3b1f6dbffcb928e5a1eff553a6013dc36a266e4ae22a0f564cebfcddab21b0023f598d9a54862456c5e2e49cd40e024093bba72da7fb78f46e53c79db2c734484ed99ca3e86c95cfab13f1769c071f962195ab6ac5ae1b43ef2f088d66f4f5a4546ab25cbf7a283c45deb7faf0e63bb98ef733add61ad9b1e12eba50228f6d9e63360f640f1821b045c16af3377c3a841216519ed23bdc97d51277e2c6a66d3d4d233148f28c7a57ee8a56eb305bfe474693a78635a64054b5c850d3db57af5dbd4057d108e3170673d1be42649cfc58526c374dea7206f79216d394c69d8a3408c1c7e91188cbf68b61eaeaa83ea2a64c25c066c7ba134c530f31f4ede2e6a7cd9b2149191380250b7512a87df604f2e8cc36a498729540e9da195805aa3c7c0d7cf671d5742aa3a8a4fe27a4562ec6cf5979b17ad9c84655f9d99f083f78e3ad6ddcffd6e348d5a4c8c08981fefd828f8d2a07bbca6c94def6a399dacf8b83d343db99132d5c56cf019b9f97c8edbb43f2934bf14dfd1efef81057b2b06eb5b1109b7b676adb85b93db771269279b6dc2307bb78872c22d8506e6ed500210821e6124595f6febd44ead96a08d8a563d69d0e3b003c71645d624e68c9b37a1112a62e169a872ffb58215039681468ef13e48c9e11935be5f414b2a98b38ca24bc4ea991f7745bb211060d78f354e9ca42fde53b3b6486fe06ad5b551a86e75cec28489112486e30593e0b42f0a66d8184c589b3f9a9decedabf3abaaed9853a833b2e4267e0116987ebead1712db2b90882c04e882ad3297e01a6e4d60b5cbd3b29fad7945edba42baeeed61241797ede4fb96311efcbcf91cbf67dfaf16d61bd20efda5d83d2de1932683552b0ec3c858ee61ea5e9ecf1995d0663f24bed5d8f14f36029b9671d02225a8061c47b210fa156c2131b5e66b9f1666d259f2acc2fb95bf83b09e347b897f7538454ffe0d0da4552801ec8f64d8f9d8bc1b4b44b4aafb856414de5d83b69ac6ba05f1d677ebb460f66df1984118cc2c7fd5146c81870d1a41fc1aa5398bee80a34305837b50bce55d48457629ea2bccd11fd17b24261e304a348fad7ca25aba9aea8a3422dada4d6cc213d0e538745169a7cc1572211bcd69d264ef89ac4f72c18850e512f506af57ba63735e92e02891944bcaa37c36bd33a2738d803b9e6531c7ac63afca9348e10e4a72de74939d0281e80c48dadfdf89526d63ca666436fb76c5e4d13a445ff4167c79ba79d1d6c9da03e82f9880026066938fdb7b8272475d60ddfb200af4c96329fecb05fef89347c8a4fa793db35b1ff8f59ae28764ecca17b88c245967ef7b13aea84e2552bee4db63093a78530fb7053c3c51bb42d8512272405032fff4cc69169364f6e992835bcdd603b65fdf5639e1768e14e3050a0fe45e2ac9e77cdfa07d0c30af02e9410745311052b310cbfdc94202139ec45e4ec68fefa95378b63659e4552a68e909dff33bf90ee730caea9e6fa8091447d0c54a95e3cab4927d69a062a5b08bc6760053c357363e9eb7b0feffa37ad55ff91d7ce0d2fb679edb5ec29b27049c9e7e73b99705db6b7821a5b2c12b0a344cf753b065cec592014ecf50f4ee65c95a2055a0b8b53d6a5e325360b0b282c84ba2141c85f9a8101518fae9f045fcf8f8c75e82c318add782ece3b4bf6e8c2425c7b1b81d40c01d0f66d6f52f488adbfe14236bd4799e23a83348b902cc205f0a273f812eafbf670f59b681c70be1cda7109393002c1b7b88e974e9ec6acd12201aad856550c60c8dc20b59e14d6e8b14d5307b8f5ebd4c26c04c3c57699adf7dc6b98d169c3ac143cd3a5eaf55593d5179a2f096756515ab957fe16c2473dc6031c7d47cad4947b834cc72534669a7084c8b224c68fe38e48d314089191decb0033c5f25ec5def3687bb0b771948c1d7bbf31626a1467ddb59cfd3aaa7dd51435deeaffe8530375b8869be34c17ff2929c74079116553bb6fb31935086d543c445e891a1864a24dd3a5086560f5ddf2fed1ec903512018c4783f77c68f3f4b14b5a835846bd8331a598ec4b284d7a0617acb365b9342d1157749858e09e593ba06af7a079d283b7afce4a8195428ac8efab78d097d61ff358edcfb8bc2c00a9701eb4ee6dd3953849bb9e0d37b50a6adce826017b25c7b9f8af3f68155907cb510b83e27ee031a2b48326cfcccf10f1e1a506b9db38604455636464b4c67e3bbc2bfccd621fc836ecca3e9faebe16eecbe430658054a20c99c5e483db127bfe0ab1afee767cf2e2a1f5fc4403adb8680548a96f9bbc61003de280aa1a26b2bc154f84da573cee3feb743a4a9453ad2cc59942b8cfbb52528cd4d6b0647c6a7580330146d447be5c533b790ef9aac05093ab270c8938eda94ebfc209c0a6044e1dfb2d09e22858a1aac705ef17fbbd51adf54868ebee973ab774b27ebef7789d5ce33a2215131e8ad887fb61e2a7ca15cd637abf5f6c71d6103b0a47d5f3107a383021257dd678d091e43bafde041de84f2477319612dbef84f93881dfc6200f07a410f47c3dfce3acc1bdb2e87e99683c64bd5fc2e1ee624b87b3e945506b4cc418bc2c04cf0b57209a7361439cbb8338ededd3a58b5f71f4023b374c4fa468f5ce551f3daae207d7a9400eda7b06c7196f62a61cf870c0e011117a2366e4a58aa98b1ed8db99e539fd3d403ca868fbd46bce038767abd3636ddb2114e3b072618d336a5d45415cf3a7af26cac5b167bfc67673ec95ba07b8fdfbeddd7b4cf187c49e534fe6e25d33dc949c57e0b2e117d95fca27ff88cb431e91395144df44ebbc6ec022a306c1bd9d2f636d8483b8a6342200322a006ad578eee240bf3b476a51442cb0e3436a94fad112968cd80e419d03c8499f60245ca7af06aaad670d16f1e1c555150cb103aae9b15bfa6e972e67c26580f8b99e8f3c1f573f7131545cc877d4495a507bf82cf356b00504d624a9ab5eb5ebe8c3a5b81c7ae6b1fcba4a2a4b9a8467b6160f269affaaf549357ece49ad221b0c8db218f4337afe2f7d814d9ba4c0802027688925bd1cddf265f7d79221eda0d3d1d566f6fcf1d5d452addd782b4f9658795c2ce537d9aca9556bd01dcdc545c17bfd8a1a1770e7b66b1448b139caf66dad3affe24a52b600f1493b56310cff2f3fb1e4dbe0a23cc354e9a4741972f5c944b714b18d5a1416471cd01e7f2eda56c939da9bde27a3c6af46f40f9e98af8460d95c0788e5d201103a06f80f0fbbd438c56c8241cfd07b2214bbf93cd5bbfff06aeb550dcd1c8c03bc3decb25a2df1e09b093dbb12b17eda79e1cc7f04dcb22ed42cd9892021b55444199b3597093caabccfdd2a2d05d2133ec0ee3f4e31e4b42fd6cb3105395b6965d0ee5788c61f898d65864de79427d05c8c1dcce081977a9a7e4875ae19e2f5e8c5b13c715df2e5f8cf70e1b5c508364d72e3890a05394fd0154e46cce8d1f7053336a0afa518cc042ca8112dc3e765b86c88117a28d26e6eb8c0c3059925f229e5a8d8e7b92410337197b025f754688928678209b3dd0ea68b5d9ec4a0982d31bb2d20a7ec4ce0dbb14c064b0f654bbc63ce9890614c1b7b358ead0e570a6f7e1b246171ebff7391226569a7124c94d907ebe640c414e933adf6c0cf45035c2fe2d921da8b2436d11717c825538511320a1491a6d4e38994909774c241e844f2de236e65be3178e8b7a8c1fab711f2443cd9273f4cb4dc3c09afd6fa0c80cfbbde227811ecf06ce507edb4c64a9cea57cd2c3ab0f93935ba752d4e60cbfec540b3d310c5730a83f87991d5694391dcf79f3004d4ec16a3168855080ac9411472c426d95935c3c264a97ace075ccad9d5d4593b8aca37c681fde088647aaea9fdc5c0e09192458d4b4966ca04f852baefb09120e66313f6821e8f4d13b6b9876ccf544a6afea75d1089d748ef2128824db3a0e67feffea41e53697906a2b0560b286a0f1f510107e15e392586cf2721ea7c8f14e09177dc9e45fc96a6081356c1c715963641c9e8d5e4c093b831e3481c6a7b87eceed346c467bd587acc3abc10c5a1628a2820ebee04c7c7b4ef16684a7689b692f9375f3e01989d6f4a966ed6ce5e5fd5abcc6550e8e9c837cfbdcd1f21f9597eaefba1b8f1e60c59f4c10a1159735476a9b1722a22969ebfe67433adf281e6059fda5ba16306d8b60d250e725fcf331066e250ec1e191164044275df448540d6a99d2bfa2c9f225b2ae21f5dcb866f788338af82535adcae89aa03368e8b08b7def70727aa0cea3df03c358004bb882031a45d8fcb1d7d4e23a077b731a99609916bebac34f4d43c243b79fe03cc4ed9136178c72e24057b09c3ed64cfbea4061b413d05598e5523ef15a0c8b0e8ef0df05c389fc94a3df450bf4d8f994c05241de75436cd6ea6d34a96cd56df31ffe3411adac043ab3a591c286b65ae87b28650b836eff8b83c13fff00d336d20f10c3a30581e3d94e8c7ec28c2b2370ff5c20317ebea01cf961e0d00ec67335f425464a68931429131e0bf617129e3f55aef24c8c315dc1b91eb28364bbec0ccc4bf2e4150bfa04e3f6e1ae2976327a2c7c74a6fab89a407ab6c7506d6bc7304bb5d2c30fb9fdf428e94d9fded789de7bd166a8f95e23eefc97110d30efb993629b423ba9f9f55aba29bd0c0183925d22f3e02ab69abc9df54b4b8ccee3e3a951d2eb330ef5d86f33e312f7e73500975e526f03d1e865ee761aa4f90873a21218a18382e871b1d40c95c39c6202d0c794422e5466cdd226d8fe8f5c89d3ad9ca96d1853436cc7dccba34d61b05298d769f690f18fba1f73e73ec8be6464b4a03f1576461f43933ba8888c2c026dfcbb52f44564d5c75451ac2e3ff6805ca83205d9cadd93844b2ad6454a82e6fb9b7aa76105b6bd6784b3f81023cc101118a454b0dc390463175db4de650d3a8dd1ccf8f619137916eaacfa23141ccf0fd81b0c5f3ff7a8eb0de850a0cb2da2b1a96343e26ee6c35d2dd6f85d5fcc2f74a203b40d7f4533b3e12c0759325f4c0a46d22c71d79a8f976bf3c3a8de7dacb21a3dd79402a64f6b8101eb9688864a37ff832474dfee0220505d2d9a73027531b6aeb838d7c47d3133a2602246761a389eae7f6738659be9cc43bdaa6a23a266ae026a2f79430b6cfed0bac9673458fa58b9b1a85384cfd03181fcf201e18547712c1e9e18e54c64dec256dc02ce8944e801241e8bed65e7df4c48c11dba1d0bc53f2a806a5b98ebb60216dd815e09f09b9a0ea291a30c0c53d5cccc023284ffddefa2b6fe168a6b25c63889fb0e55e3023277a19f989296759203e33fff0931622bed69c1f6cc868f3ee367293395c26d7dfcbb0304dcea2c54d61ec5c4567724d48563ab8a576cc6b34237b15dd44f780533409bd177cc730bdbffa54b0640912b0907a7668457770e664f9d148c9d99a2fa895439054c97cd3d869519964acaf375e1ca46e48b30cf59815b60ebd92dc2ef0654b186a29933b0ac0af130396007a60cbeaa2e7e69a6dbf7729327309c723c039cc6e44a42b4908fd810752e98a43fc574e24e2f3347497c75ecf8cd5c050d7d13d71d49aa3c8c3fe98407700b2eb21531b01d2b6e876b77d5553b563045d2d6ed64d6229e2d7ffe01e7fc5e172841d7ee96815a5cafb7febce7a9819586b1b2e2423e5f2d917d90b224c17fb827c86cf0d22a76162e380ec6a8fd7f3767c14e796aeff8a789af4f57e65faf4cf728c9a24bae91b44b2a7e61eab6c6afcff9b77ff2d058e5d0c44e3c967366d9b23aebace345560584ec1977f0663fb5f63c611054023572d6f2194945f6805dcb083f2cf3bff8ba8530e6d168c78add49b33b965b2477f9b7de044500c2cab610fe9503c3fe78d0da69b5c28489d39c3cde8323fd01e9d3ef3249be82c4e42b0e7ec6670517489bd9ad270a2537827c58b26a06d1e32e1410710b26aed825ab92358a0fe71099fb5d424a49d9ea3a7413f92ee928ccc29349f3b5d1d5aa496a2a35094ad0b930a072d46b6d75bedb993f2040ac9ed0ff38499f7265839c5d57ba94e994fa6738e7c61d0f0e6ab6662a5a82c933b1a859e6a1d1926dcce8816407587d0a3b78adba97f9166b1e663d92b3a92387562adf590d5308945dcdde6a9db856e23bb30c9b224acfa85ed89d75e3f8a607b6f09d5fe5e975904ebc66c2e97d886b041c5210075d2d6e274d31e63a281e926750329cbb7a729c04124452f0ee377c347b11b52558c2640e62f7dc75846e954ba4806e7daffe740ecd315914bf7546658790582cbe77684a94b8e8677f6600c912adb908deaa3e0c26d449bc504eac36d3c44bb11ee7591c3ce15879f6f84ddd0ccd2544016543824df3ff04c4616e02ed98ededd243b275cec237054a4328572417537b9fe8a1280c474d6743d17816eb48fe875b851634c86ed95147fa0769f9c3a5e9a8d4154ee213f7b067be17cfc6e9711d27be913e118e36b15b598ce93196388b9d01a9835c4d432778fbe38e2977193db2e1a05512fad05f40787af64a705b75be27ed469f0dbade992f471728910b5469f835852e7ad74d72a6c7f997d8d030f2c245fe736ba9df44a74971e42ed904b7793282ed946f05ae218890f682d19fe40f10477df0cad7fd1d04e7b0190d07a5c421f6ed57782f527704bb72bd2d24b98e16044f7821ef5fbd4b623155e16fd5b4bf4469060c194fe9118e6e13402d794d4cf9583202e4bb8685301baece228ca481ee4135bc2421c842bfd8519eb7b08e120322486354d694791d0140ded3106829cb59499da8d29c9bfb229ac53b39a08d960acf63db836112e945ead58f9e986a17562da14d154bebe8a247e8a3de7af44bed816c4e4ca0d074527dc8096a52cfd958c221ccc67aefe251fcb31b0e0972bd14abda189a932f82eb978f326625bb275632746a25cc3259946f214767c6df9056072cb0d6b6eb2caf6320cda302b45f8ca944eb305fee56a78531a01826a06553ef2a169c10300311bf27c5b7ecd5e52eb1ac3ee6fafec63a55c3c69eec7f4191ca501041d1b268080280b3402c87c4d8f84fd6efd50d1625f8d574e8706a8e23abfefa1c7c0f08d0e5582e3cb266513cfe42bc045af739ffa6694afc2f4dbbaa568e804302dd1c9af10808ced343a681300362f70a6c750522af6c20241b43b0c1a96a36b1a55a3431826b550cde601c438c7f9fe989c823ebf836dfe136bc95a225c9b08ee7daa7837d216483c50ffc17255df69bf530164fbe9903453de9cae9f9eab230035e9a0ef8a63c2fac92932cfc60699d2352e2ff8dc2204ee8c0d28c9a609719fe069869a7437258c7c2cf542bc4307e0c9248b69647b8cd784837287dd0aa125f2f2bdd0e75de64a2ba67aadc34a438b1d71232ecf0a47cb8c04e1f8f17e4bfb6feba2b473878d4dbb8e82e56dacf1300924a5629a37c585f6db8ceae8c3694e328f1c07eb3b31f1d20de7ab1ef75128d9a816038fbbf961e36a0b98e84f5c1ad096c6fc22f91d758c3a820c1a69ff47b3372707a5d7e30fd3bdcd5a357eb5f7bbe5902b6eab9d4c06c68fcbba4fd7dfc49bd83e8b0e9d8ffc706be260119feffe980d8737c73cebc4c52f70f67f49afa467d309e42fc</script></div><script src="/lib/blog-encrypt.js"></script><link href="/css/blog-encrypt.css" rel="stylesheet" type="text/css">]]></content>
    
    <summary type="html">
    
      密码等级 0
    
    </summary>
    
      <category term="项目经历" scheme="http://benpaodewoniu.github.io/categories/%E9%A1%B9%E7%9B%AE%E7%BB%8F%E5%8E%86/"/>
    
      <category term="中型" scheme="http://benpaodewoniu.github.io/categories/%E9%A1%B9%E7%9B%AE%E7%BB%8F%E5%8E%86/%E4%B8%AD%E5%9E%8B/"/>
    
      <category term="thlm" scheme="http://benpaodewoniu.github.io/categories/%E9%A1%B9%E7%9B%AE%E7%BB%8F%E5%8E%86/%E4%B8%AD%E5%9E%8B/thlm/"/>
    
    
      <category term="thlm" scheme="http://benpaodewoniu.github.io/tags/thlm/"/>
    
  </entry>
  
  <entry>
    <title>thegraph | thegraph 平台</title>
    <link href="http://benpaodewoniu.github.io/2024/06/10/thegraph0/"/>
    <id>http://benpaodewoniu.github.io/2024/06/10/thegraph0/</id>
    <published>2024-06-09T17:36:50.000Z</published>
    <updated>2024-06-10T06:55:03.213Z</updated>
    
    <content type="html"><![CDATA[<p>使用 <code>thegraph</code> 进行监控。</p><a id="more"></a><h2 id="swap"><a href="#swap" class="headerlink" title="swap"></a>swap</h2><figure class="highlight clojure"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">swaps(<span class="name">orderBy:</span> timestamp, orderDirection: desc, where:</span><br><span class="line"> &#123; pair: <span class="string">"0x045a15bd4999cf396220f587fc77b4d159e8e67b"</span> &#125;</span><br><span class="line">) &#123;</span><br><span class="line">     pair &#123;</span><br><span class="line">       token0 &#123;</span><br><span class="line">         symbol</span><br><span class="line">       &#125;</span><br><span class="line">       token1 &#123;</span><br><span class="line">         symbol</span><br><span class="line">       &#125;</span><br><span class="line">     &#125;</span><br><span class="line">     amount0In</span><br><span class="line">     amount0Out</span><br><span class="line">     amount1In</span><br><span class="line">     amount1Out</span><br><span class="line">     amountUSD</span><br><span class="line">     from</span><br><span class="line">     to</span><br><span class="line">     sender</span><br><span class="line">     timestamp</span><br><span class="line">     logIndex</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="liquidity"><a href="#liquidity" class="headerlink" title="liquidity"></a>liquidity</h2><figure class="highlight autohotkey"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line"><span class="title">  liquidityPositionSnapshots(orderBy:timestamp,orderDirection:desc,where:</span>&#123;</span><br><span class="line"><span class="title">    pair:</span><span class="string">"0x045a15bd4999cf396220f587fc77b4d159e8e67b"</span></span><br><span class="line">  &#125;)&#123;</span><br><span class="line"><span class="built_in">    id,</span></span><br><span class="line"><span class="built_in">    block,</span></span><br><span class="line"><span class="built_in">    reserve0,</span></span><br><span class="line"><span class="built_in">    reserve1,</span></span><br><span class="line"><span class="built_in">    liquidityTokenTotalSupply,</span></span><br><span class="line"><span class="built_in">    liquidityTokenBalance,</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;使用 &lt;code&gt;thegraph&lt;/code&gt; 进行监控。&lt;/p&gt;
    
    </summary>
    
      <category term="区块链" scheme="http://benpaodewoniu.github.io/categories/%E5%8C%BA%E5%9D%97%E9%93%BE/"/>
    
      <category term="dapp" scheme="http://benpaodewoniu.github.io/categories/%E5%8C%BA%E5%9D%97%E9%93%BE/dapp/"/>
    
      <category term="thegraph" scheme="http://benpaodewoniu.github.io/categories/%E5%8C%BA%E5%9D%97%E9%93%BE/dapp/thegraph/"/>
    
    
      <category term="thegraph" scheme="http://benpaodewoniu.github.io/tags/thegraph/"/>
    
  </entry>
  
  <entry>
    <title>chainbot | chainbot</title>
    <link href="http://benpaodewoniu.github.io/2024/06/10/chainbot0/"/>
    <id>http://benpaodewoniu.github.io/2024/06/10/chainbot0/</id>
    <published>2024-06-09T16:27:09.000Z</published>
    <updated>2024-06-10T06:54:03.844Z</updated>
    
    <content type="html"><![CDATA[<p>这个是我觉得非常好的监控平台。</p><a id="more"></a><h2 id="SWAP"><a href="#SWAP" class="headerlink" title="SWAP"></a>SWAP</h2><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Channel:SWAP</span><br><span class="line">Pair:&#123;<span class="variable">$dex</span><span class="selector-class">.tokenBase</span>.symbol&#125;_&#123;<span class="variable">$dex</span><span class="selector-class">.tokenQuote</span>.symbol&#125;</span><br><span class="line">Price:&#123;<span class="variable">$dex</span>.priceUSD&#125;</span><br><span class="line">Token1Amount:&#123;<span class="variable">$dex</span><span class="selector-class">.tokenIn</span>.amount&#125;</span><br><span class="line">Token2Amount:&#123;<span class="variable">$dex</span><span class="selector-class">.tokenOut</span>.amount&#125;</span><br></pre></td></tr></table></figure><ul><li>条件<ul><li>WhaleBuySale</li><li>0</li><li>%</li></ul></li></ul><h2 id="LIQUIDITY"><a href="#LIQUIDITY" class="headerlink" title="LIQUIDITY"></a>LIQUIDITY</h2><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Channel:LIQUIDITY</span><br><span class="line">Pair:&#123;<span class="variable">$dex</span><span class="selector-class">.tokenBase</span>.symbol&#125;_&#123;<span class="variable">$dex</span><span class="selector-class">.tokenQuote</span>.symbol&#125;</span><br><span class="line">Token1Amount:&#123;<span class="variable">$dex</span><span class="selector-class">.tokenBase</span>.amount&#125;</span><br><span class="line">Token2Amount:&#123;<span class="variable">$dex</span><span class="selector-class">.tokenQuote</span>.amount&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;这个是我觉得非常好的监控平台。&lt;/p&gt;
    
    </summary>
    
      <category term="区块链" scheme="http://benpaodewoniu.github.io/categories/%E5%8C%BA%E5%9D%97%E9%93%BE/"/>
    
      <category term="dapp" scheme="http://benpaodewoniu.github.io/categories/%E5%8C%BA%E5%9D%97%E9%93%BE/dapp/"/>
    
      <category term="chainbot" scheme="http://benpaodewoniu.github.io/categories/%E5%8C%BA%E5%9D%97%E9%93%BE/dapp/chainbot/"/>
    
    
      <category term="chainbot" scheme="http://benpaodewoniu.github.io/tags/chainbot/"/>
    
  </entry>
  
  <entry>
    <title>webhook | 使用以及技巧</title>
    <link href="http://benpaodewoniu.github.io/2024/06/10/webhook0/"/>
    <id>http://benpaodewoniu.github.io/2024/06/10/webhook0/</id>
    <published>2024-06-09T16:26:51.000Z</published>
    <updated>2024-06-10T06:57:04.421Z</updated>
    
    <content type="html"><![CDATA[<p>webhook 并不是一个新的技术，而是一种思想。</p><a id="more"></a><p>现在主流的客户端获取数据主流有两个方法</p><ul><li>restful</li><li>websocket</li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;webhook 并不是一个新的技术，而是一种思想。&lt;/p&gt;
    
    </summary>
    
      <category term="区块链" scheme="http://benpaodewoniu.github.io/categories/%E5%8C%BA%E5%9D%97%E9%93%BE/"/>
    
      <category term="webhook" scheme="http://benpaodewoniu.github.io/categories/%E5%8C%BA%E5%9D%97%E9%93%BE/webhook/"/>
    
    
      <category term="webhook" scheme="http://benpaodewoniu.github.io/tags/webhook/"/>
    
  </entry>
  
  <entry>
    <title>blockchain | 监控链上数据平台</title>
    <link href="http://benpaodewoniu.github.io/2024/06/03/blockchain17/"/>
    <id>http://benpaodewoniu.github.io/2024/06/03/blockchain17/</id>
    <published>2024-06-03T15:25:41.000Z</published>
    <updated>2024-06-10T06:53:00.634Z</updated>
    
    <content type="html"><![CDATA[<p>监控链上数据平台。</p><a id="more"></a><h2 id="dbotx"><a href="#dbotx" class="headerlink" title="dbotx"></a>dbotx</h2><ul><li><a href="https://dbotx.com/zh/webhooks/nft">dbotx</a></li></ul><h2 id="chainbot"><a href="#chainbot" class="headerlink" title="chainbot"></a>chainbot</h2><ul><li><a href="https://chainbot.io/">chainbot</a></li></ul><h2 id="tokenview"><a href="#tokenview" class="headerlink" title="tokenview"></a>tokenview</h2><ul><li><a href="https://services.tokenview.io/cn">tokenview</a></li></ul><h2 id="nftscan"><a href="#nftscan" class="headerlink" title="nftscan"></a>nftscan</h2><ul><li><a href="https://www.nftscan.com/">nftscan</a></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;监控链上数据平台。&lt;/p&gt;
    
    </summary>
    
      <category term="区块链" scheme="http://benpaodewoniu.github.io/categories/%E5%8C%BA%E5%9D%97%E9%93%BE/"/>
    
      <category term="基础" scheme="http://benpaodewoniu.github.io/categories/%E5%8C%BA%E5%9D%97%E9%93%BE/%E5%9F%BA%E7%A1%80/"/>
    
      <category term="webhook" scheme="http://benpaodewoniu.github.io/categories/%E5%8C%BA%E5%9D%97%E9%93%BE/webhook/"/>
    
    
      <category term="webhook" scheme="http://benpaodewoniu.github.io/tags/webhook/"/>
    
  </entry>
  
</feed>
